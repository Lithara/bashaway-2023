var po=Object.create;var ri=Object.defineProperty;var mo=Object.getOwnPropertyDescriptor;var go=Object.getOwnPropertyNames;var wo=Object.getPrototypeOf,yo=Object.prototype.hasOwnProperty;var bo=(s,t,e)=>t in s?ri(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var de=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),So=(s,t)=>{for(var e in t)ri(s,e,{get:t[e],enumerable:!0})},Nr=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of go(t))!yo.call(s,r)&&r!==e&&ri(s,r,{get:()=>t[r],enumerable:!(i=mo(t,r))||i.enumerable});return s};var ni=(s,t,e)=>(e=s!=null?po(wo(s)):{},Nr(t||!s||!s.__esModule?ri(e,"default",{value:s,enumerable:!0}):e,s)),vo=s=>Nr(ri({},"__esModule",{value:!0}),s);var T=(s,t,e)=>(bo(s,typeof t!="symbol"?t+"":t,e),e),Ys=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var n=(s,t,e)=>(Ys(s,t,"read from private field"),e?e.call(s):t.get(s)),p=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},u=(s,t,e,i)=>(Ys(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),us=(s,t,e,i)=>({set _(r){u(s,t,r,e)},get _(){return n(s,t,i)}}),w=(s,t,e)=>(Ys(s,t,"access private method"),e);var Wr=de((Aa,Pr)=>{"use strict";Pr.exports=Mr;function Mr(s,t,e){s instanceof RegExp&&(s=jr(s,e)),t instanceof RegExp&&(t=jr(t,e));var i=Lr(s,t,e);return i&&{start:i[0],end:i[1],pre:e.slice(0,i[0]),body:e.slice(i[0]+s.length,i[1]),post:e.slice(i[1]+t.length)}}function jr(s,t){var e=t.match(s);return e?e[0]:null}Mr.range=Lr;function Lr(s,t,e){var i,r,o,h,a,l=e.indexOf(s),c=e.indexOf(t,l+1),f=l;if(l>=0&&c>0){if(s===t)return[l,c];for(i=[],o=e.length;f>=0&&!a;)f==l?(i.push(f),l=e.indexOf(s,f+1)):i.length==1?a=[i.pop(),c]:(r=i.pop(),r<o&&(o=r,h=c),c=e.indexOf(t,f+1)),f=l<c&&l>=0?l:c;i.length&&(a=[o,h])}return a}});var Hr=de((Ra,qr)=>{var Ir=Wr();qr.exports=_o;var $r="\0SLASH"+Math.random()+"\0",Br="\0OPEN"+Math.random()+"\0",Xs="\0CLOSE"+Math.random()+"\0",zr="\0COMMA"+Math.random()+"\0",Ur="\0PERIOD"+Math.random()+"\0";function Qs(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function Eo(s){return s.split("\\\\").join($r).split("\\{").join(Br).split("\\}").join(Xs).split("\\,").join(zr).split("\\.").join(Ur)}function xo(s){return s.split($r).join("\\").split(Br).join("{").split(Xs).join("}").split(zr).join(",").split(Ur).join(".")}function Gr(s){if(!s)return[""];var t=[],e=Ir("{","}",s);if(!e)return s.split(",");var i=e.pre,r=e.body,o=e.post,h=i.split(",");h[h.length-1]+="{"+r+"}";var a=Gr(o);return o.length&&(h[h.length-1]+=a.shift(),h.push.apply(h,a)),t.push.apply(t,h),t}function _o(s){return s?(s.substr(0,2)==="{}"&&(s="\\{\\}"+s.substr(2)),oi(Eo(s),!0).map(xo)):[]}function Oo(s){return"{"+s+"}"}function Co(s){return/^-?0\d/.test(s)}function To(s,t){return s<=t}function Ao(s,t){return s>=t}function oi(s,t){var e=[],i=Ir("{","}",s);if(!i)return[s];var r=i.pre,o=i.post.length?oi(i.post,!1):[""];if(/\$$/.test(i.pre))for(var h=0;h<o.length;h++){var a=r+"{"+i.body+"}"+o[h];e.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),f=l||c,d=i.body.indexOf(",")>=0;if(!f&&!d)return i.post.match(/,.*\}/)?(s=i.pre+"{"+i.body+Xs+i.post,oi(s)):[s];var g;if(f)g=i.body.split(/\.\./);else if(g=Gr(i.body),g.length===1&&(g=oi(g[0],!1).map(Oo),g.length===1))return o.map(function(fs){return i.pre+g[0]+fs});var y;if(f){var E=Qs(g[0]),m=Qs(g[1]),S=Math.max(g[0].length,g[1].length),b=g.length==3?Math.abs(Qs(g[2])):1,x=To,C=m<E;C&&(b*=-1,x=Ao);var A=g.some(Co);y=[];for(var D=E;x(D,m);D+=b){var P;if(c)P=String.fromCharCode(D),P==="\\"&&(P="");else if(P=String(D),A){var yt=S-P.length;if(yt>0){var cs=new Array(yt+1).join("0");D<0?P="-"+cs+P.slice(1):P=cs+P}}y.push(P)}}else{y=[];for(var Rt=0;Rt<g.length;Rt++)y.push.apply(y,oi(g[Rt],!1))}for(var Rt=0;Rt<y.length;Rt++)for(var h=0;h<o.length;h++){var a=r+y[Rt]+o[h];(!t||f||a)&&e.push(a)}}return e}});var Rr=de(v=>{"use strict";var $h=v&&v.__createBinding||(Object.create?function(s,t,e,i){i===void 0&&(i=e),Object.defineProperty(s,i,{enumerable:!0,get:function(){return t[e]}})}:function(s,t,e,i){i===void 0&&(i=e),s[i]=t[e]}),Bh=v&&v.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),qn=v&&v.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.hasOwnProperty.call(s,e)&&$h(t,s,e);return Bh(t,s),t},Ar=v&&v.__awaiter||function(s,t,e,i){function r(o){return o instanceof e?o:new e(function(h){h(o)})}return new(e||(e=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(d){h(d)}}function l(f){try{c(i.throw(f))}catch(d){h(d)}}function c(f){f.done?o(f.value):r(f.value).then(a,l)}c((i=i.apply(s,t||[])).next())})},ot;Object.defineProperty(v,"__esModule",{value:!0});v.getCmdPath=v.tryGetExecutablePath=v.isRooted=v.isDirectory=v.exists=v.READONLY=v.UV_FS_O_EXLOCK=v.IS_WINDOWS=v.unlink=v.symlink=v.stat=v.rmdir=v.rm=v.rename=v.readlink=v.readdir=v.open=v.mkdir=v.lstat=v.copyFile=v.chmod=void 0;var Hn=qn(require("fs")),qs=qn(require("path"));ot=Hn.promises,v.chmod=ot.chmod,v.copyFile=ot.copyFile,v.lstat=ot.lstat,v.mkdir=ot.mkdir,v.open=ot.open,v.readdir=ot.readdir,v.readlink=ot.readlink,v.rename=ot.rename,v.rm=ot.rm,v.rmdir=ot.rmdir,v.stat=ot.stat,v.symlink=ot.symlink,v.unlink=ot.unlink;v.IS_WINDOWS=process.platform==="win32";v.UV_FS_O_EXLOCK=268435456;v.READONLY=Hn.constants.O_RDONLY;function zh(s){return Ar(this,void 0,void 0,function*(){try{yield v.stat(s)}catch(t){if(t.code==="ENOENT")return!1;throw t}return!0})}v.exists=zh;function Uh(s,t=!1){return Ar(this,void 0,void 0,function*(){return(t?yield v.stat(s):yield v.lstat(s)).isDirectory()})}v.isDirectory=Uh;function Gh(s){if(s=Hh(s),!s)throw new Error('isRooted() parameter "p" cannot be empty');return v.IS_WINDOWS?s.startsWith("\\")||/^[A-Z]:/i.test(s):s.startsWith("/")}v.isRooted=Gh;function qh(s,t){return Ar(this,void 0,void 0,function*(){let e;try{e=yield v.stat(s)}catch(r){r.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${s}': ${r}`)}if(e&&e.isFile()){if(v.IS_WINDOWS){let r=qs.extname(s).toUpperCase();if(t.some(o=>o.toUpperCase()===r))return s}else if(Gn(e))return s}let i=s;for(let r of t){s=i+r,e=void 0;try{e=yield v.stat(s)}catch(o){o.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${s}': ${o}`)}if(e&&e.isFile()){if(v.IS_WINDOWS){try{let o=qs.dirname(s),h=qs.basename(s).toUpperCase();for(let a of yield v.readdir(o))if(h===a.toUpperCase()){s=qs.join(o,a);break}}catch(o){console.log(`Unexpected error attempting to determine the actual case of the file '${s}': ${o}`)}return s}else if(Gn(e))return s}}return""})}v.tryGetExecutablePath=qh;function Hh(s){return s=s||"",v.IS_WINDOWS?(s=s.replace(/\//g,"\\"),s.replace(/\\\\+/g,"\\")):s.replace(/\/\/+/g,"/")}function Gn(s){return(s.mode&1)>0||(s.mode&8)>0&&s.gid===process.getgid()||(s.mode&64)>0&&s.uid===process.getuid()}function Vh(){var s;return(s=process.env.COMSPEC)!==null&&s!==void 0?s:"cmd.exe"}v.getCmdPath=Vh});var Zn=de(M=>{"use strict";var Kh=M&&M.__createBinding||(Object.create?function(s,t,e,i){i===void 0&&(i=e),Object.defineProperty(s,i,{enumerable:!0,get:function(){return t[e]}})}:function(s,t,e,i){i===void 0&&(i=e),s[i]=t[e]}),Yh=M&&M.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),Vn=M&&M.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.hasOwnProperty.call(s,e)&&Kh(t,s,e);return Yh(t,s),t},ue=M&&M.__awaiter||function(s,t,e,i){function r(o){return o instanceof e?o:new e(function(h){h(o)})}return new(e||(e=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(d){h(d)}}function l(f){try{c(i.throw(f))}catch(d){h(d)}}function c(f){f.done?o(f.value):r(f.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};Object.defineProperty(M,"__esModule",{value:!0});M.findInPath=M.which=M.mkdirP=M.rmRF=M.mv=M.cp=void 0;var Qh=require("assert"),It=Vn(require("path")),R=Vn(Rr());function Xh(s,t,e={}){return ue(this,void 0,void 0,function*(){let{force:i,recursive:r,copySourceDirectory:o}=Zh(e),h=(yield R.exists(t))?yield R.stat(t):null;if(h&&h.isFile()&&!i)return;let a=h&&h.isDirectory()&&o?It.join(t,It.basename(s)):t;if(!(yield R.exists(s)))throw new Error(`no such file or directory: ${s}`);if((yield R.stat(s)).isDirectory())if(r)yield Xn(s,a,0,i);else throw new Error(`Failed to copy. ${s} is a directory, but tried to copy without recursive flag.`);else{if(It.relative(s,a)==="")throw new Error(`'${a}' and '${s}' are the same file`);yield Jn(s,a,i)}})}M.cp=Xh;function Jh(s,t,e={}){return ue(this,void 0,void 0,function*(){if(yield R.exists(t)){let i=!0;if((yield R.isDirectory(t))&&(t=It.join(t,It.basename(s)),i=yield R.exists(t)),i)if(e.force==null||e.force)yield Kn(t);else throw new Error("Destination already exists")}yield Dr(It.dirname(t)),yield R.rename(s,t)})}M.mv=Jh;function Kn(s){return ue(this,void 0,void 0,function*(){if(R.IS_WINDOWS&&/[*"<>|]/.test(s))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield R.rm(s,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(t){throw new Error(`File was unable to be removed ${t}`)}})}M.rmRF=Kn;function Dr(s){return ue(this,void 0,void 0,function*(){Qh.ok(s,"a path argument must be provided"),yield R.mkdir(s,{recursive:!0})})}M.mkdirP=Dr;function Yn(s,t){return ue(this,void 0,void 0,function*(){if(!s)throw new Error("parameter 'tool' is required");if(t){let i=yield Yn(s,!1);if(!i)throw R.IS_WINDOWS?new Error(`Unable to locate executable file: ${s}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${s}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return i}let e=yield Qn(s);return e&&e.length>0?e[0]:""})}M.which=Yn;function Qn(s){return ue(this,void 0,void 0,function*(){if(!s)throw new Error("parameter 'tool' is required");let t=[];if(R.IS_WINDOWS&&process.env.PATHEXT)for(let r of process.env.PATHEXT.split(It.delimiter))r&&t.push(r);if(R.isRooted(s)){let r=yield R.tryGetExecutablePath(s,t);return r?[r]:[]}if(s.includes(It.sep))return[];let e=[];if(process.env.PATH)for(let r of process.env.PATH.split(It.delimiter))r&&e.push(r);let i=[];for(let r of e){let o=yield R.tryGetExecutablePath(It.join(r,s),t);o&&i.push(o)}return i})}M.findInPath=Qn;function Zh(s){let t=s.force==null?!0:s.force,e=Boolean(s.recursive),i=s.copySourceDirectory==null?!0:Boolean(s.copySourceDirectory);return{force:t,recursive:e,copySourceDirectory:i}}function Xn(s,t,e,i){return ue(this,void 0,void 0,function*(){if(e>=255)return;e++,yield Dr(t);let r=yield R.readdir(s);for(let o of r){let h=`${s}/${o}`,a=`${t}/${o}`;(yield R.lstat(h)).isDirectory()?yield Xn(h,a,e,i):yield Jn(h,a,i)}yield R.chmod(t,(yield R.stat(s)).mode)})}function Jn(s,t,e){return ue(this,void 0,void 0,function*(){if((yield R.lstat(s)).isSymbolicLink()){try{yield R.lstat(t),yield R.unlink(t)}catch(r){r.code==="EPERM"&&(yield R.chmod(t,"0666"),yield R.unlink(t))}let i=yield R.readlink(s);yield R.symlink(i,t,R.IS_WINDOWS?"junction":null)}else(!(yield R.exists(t))||e)&&(yield R.copyFile(s,t))})}});var so=de(ht=>{"use strict";var ta=ht&&ht.__createBinding||(Object.create?function(s,t,e,i){i===void 0&&(i=e),Object.defineProperty(s,i,{enumerable:!0,get:function(){return t[e]}})}:function(s,t,e,i){i===void 0&&(i=e),s[i]=t[e]}),ea=ht&&ht.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),si=ht&&ht.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.hasOwnProperty.call(s,e)&&ta(t,s,e);return ea(t,s),t},to=ht&&ht.__awaiter||function(s,t,e,i){function r(o){return o instanceof e?o:new e(function(h){h(o)})}return new(e||(e=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(d){h(d)}}function l(f){try{c(i.throw(f))}catch(d){h(d)}}function c(f){f.done?o(f.value):r(f.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};Object.defineProperty(ht,"__esModule",{value:!0});ht.argStringToArray=ht.ToolRunner=void 0;var Hs=si(require("os")),io=si(require("events")),ia=si(require("child_process")),sa=si(require("path")),ra=si(Zn()),eo=si(Rr()),na=require("timers"),Vs=process.platform==="win32",kr=class extends io.EventEmitter{constructor(t,e,i){if(super(),!t)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=t,this.args=e||[],this.options=i||{}}_debug(t){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(t)}_getCommandString(t,e){let i=this._getSpawnFileName(),r=this._getSpawnArgs(t),o=e?"":"[command]";if(Vs)if(this._isCmdFile()){o+=i;for(let h of r)o+=` ${h}`}else if(t.windowsVerbatimArguments){o+=`"${i}"`;for(let h of r)o+=` ${h}`}else{o+=this._windowsQuoteCmdArg(i);for(let h of r)o+=` ${this._windowsQuoteCmdArg(h)}`}else{o+=i;for(let h of r)o+=` ${h}`}return o}_processLineBuffer(t,e,i){try{let r=e+t.toString(),o=r.indexOf(Hs.EOL);for(;o>-1;){let h=r.substring(0,o);i(h),r=r.substring(o+Hs.EOL.length),o=r.indexOf(Hs.EOL)}return r}catch(r){return this._debug(`error processing line. Failed with error ${r}`),""}}_getSpawnFileName(){return Vs&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(t){if(Vs&&this._isCmdFile()){let e=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let i of this.args)e+=" ",e+=t.windowsVerbatimArguments?i:this._windowsQuoteCmdArg(i);return e+='"',[e]}return this.args}_endsWith(t,e){return t.endsWith(e)}_isCmdFile(){let t=this.toolPath.toUpperCase();return this._endsWith(t,".CMD")||this._endsWith(t,".BAT")}_windowsQuoteCmdArg(t){if(!this._isCmdFile())return this._uvQuoteCmdArg(t);if(!t)return'""';let e=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],i=!1;for(let h of t)if(e.some(a=>a===h)){i=!0;break}if(!i)return t;let r='"',o=!0;for(let h=t.length;h>0;h--)r+=t[h-1],o&&t[h-1]==="\\"?r+="\\":t[h-1]==='"'?(o=!0,r+='"'):o=!1;return r+='"',r.split("").reverse().join("")}_uvQuoteCmdArg(t){if(!t)return'""';if(!t.includes(" ")&&!t.includes("	")&&!t.includes('"'))return t;if(!t.includes('"')&&!t.includes("\\"))return`"${t}"`;let e='"',i=!0;for(let r=t.length;r>0;r--)e+=t[r-1],i&&t[r-1]==="\\"?e+="\\":t[r-1]==='"'?(i=!0,e+="\\"):i=!1;return e+='"',e.split("").reverse().join("")}_cloneExecOptions(t){t=t||{};let e={cwd:t.cwd||process.cwd(),env:t.env||process.env,silent:t.silent||!1,windowsVerbatimArguments:t.windowsVerbatimArguments||!1,failOnStdErr:t.failOnStdErr||!1,ignoreReturnCode:t.ignoreReturnCode||!1,delay:t.delay||1e4};return e.outStream=t.outStream||process.stdout,e.errStream=t.errStream||process.stderr,e}_getSpawnOptions(t,e){t=t||{};let i={};return i.cwd=t.cwd,i.env=t.env,i.windowsVerbatimArguments=t.windowsVerbatimArguments||this._isCmdFile(),t.windowsVerbatimArguments&&(i.argv0=`"${e}"`),i}exec(){return to(this,void 0,void 0,function*(){return!eo.isRooted(this.toolPath)&&(this.toolPath.includes("/")||Vs&&this.toolPath.includes("\\"))&&(this.toolPath=sa.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield ra.which(this.toolPath,!0),new Promise((t,e)=>to(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let c of this.args)this._debug(`   ${c}`);let i=this._cloneExecOptions(this.options);!i.silent&&i.outStream&&i.outStream.write(this._getCommandString(i)+Hs.EOL);let r=new ls(i,this.toolPath);if(r.on("debug",c=>{this._debug(c)}),this.options.cwd&&!(yield eo.exists(this.options.cwd)))return e(new Error(`The cwd: ${this.options.cwd} does not exist!`));let o=this._getSpawnFileName(),h=ia.spawn(o,this._getSpawnArgs(i),this._getSpawnOptions(this.options,o)),a="";h.stdout&&h.stdout.on("data",c=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(c),!i.silent&&i.outStream&&i.outStream.write(c),a=this._processLineBuffer(c,a,f=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(f)})});let l="";if(h.stderr&&h.stderr.on("data",c=>{r.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(c),!i.silent&&i.errStream&&i.outStream&&(i.failOnStdErr?i.errStream:i.outStream).write(c),l=this._processLineBuffer(c,l,f=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(f)})}),h.on("error",c=>{r.processError=c.message,r.processExited=!0,r.processClosed=!0,r.CheckComplete()}),h.on("exit",c=>{r.processExitCode=c,r.processExited=!0,this._debug(`Exit code ${c} received from tool '${this.toolPath}'`),r.CheckComplete()}),h.on("close",c=>{r.processExitCode=c,r.processExited=!0,r.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),r.CheckComplete()}),r.on("done",(c,f)=>{a.length>0&&this.emit("stdline",a),l.length>0&&this.emit("errline",l),h.removeAllListeners(),c?e(c):t(f)}),this.options.input){if(!h.stdin)throw new Error("child process missing stdin");h.stdin.end(this.options.input)}}))})}};ht.ToolRunner=kr;function oa(s){let t=[],e=!1,i=!1,r="";function o(h){i&&h!=='"'&&(r+="\\"),r+=h,i=!1}for(let h=0;h<s.length;h++){let a=s.charAt(h);if(a==='"'){i?o(a):e=!e;continue}if(a==="\\"&&i){o(a);continue}if(a==="\\"&&e){i=!0;continue}if(a===" "&&!e){r.length>0&&(t.push(r),r="");continue}o(a)}return r.length>0&&t.push(r.trim()),t}ht.argStringToArray=oa;var ls=class extends io.EventEmitter{constructor(t,e){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!e)throw new Error("toolPath must not be empty");this.options=t,this.toolPath=e,t.delay&&(this.delay=t.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=na.setTimeout(ls.HandleTimeout,this.delay,this)))}_debug(t){this.emit("debug",t)}_setResult(){let t;this.processExited&&(this.processError?t=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?t=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(t=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",t,this.processExitCode)}static HandleTimeout(t){if(!t.done){if(!t.processClosed&&t.processExited){let e=`The STDIO streams did not close within ${t.delay/1e3} seconds of the exit event from process '${t.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;t._debug(e)}t._setResult()}}}});var ao=de(at=>{"use strict";var ha=at&&at.__createBinding||(Object.create?function(s,t,e,i){i===void 0&&(i=e),Object.defineProperty(s,i,{enumerable:!0,get:function(){return t[e]}})}:function(s,t,e,i){i===void 0&&(i=e),s[i]=t[e]}),aa=at&&at.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),la=at&&at.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.hasOwnProperty.call(s,e)&&ha(t,s,e);return aa(t,s),t},oo=at&&at.__awaiter||function(s,t,e,i){function r(o){return o instanceof e?o:new e(function(h){h(o)})}return new(e||(e=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(d){h(d)}}function l(f){try{c(i.throw(f))}catch(d){h(d)}}function c(f){f.done?o(f.value):r(f.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};Object.defineProperty(at,"__esModule",{value:!0});at.getExecOutput=at.exec=void 0;var ro=require("string_decoder"),no=la(so());function ho(s,t,e){return oo(this,void 0,void 0,function*(){let i=no.argStringToArray(s);if(i.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let r=i[0];return t=i.slice(1).concat(t||[]),new no.ToolRunner(r,t,e).exec()})}at.exec=ho;function ca(s,t,e){var i,r;return oo(this,void 0,void 0,function*(){let o="",h="",a=new ro.StringDecoder("utf8"),l=new ro.StringDecoder("utf8"),c=(i=e==null?void 0:e.listeners)===null||i===void 0?void 0:i.stdout,f=(r=e==null?void 0:e.listeners)===null||r===void 0?void 0:r.stderr,d=m=>{h+=l.write(m),f&&f(m)},g=m=>{o+=a.write(m),c&&c(m)},y=Object.assign(Object.assign({},e==null?void 0:e.listeners),{stdout:g,stderr:d}),E=yield ho(s,t,Object.assign(Object.assign({},e),{listeners:y}));return o+=a.end(),h+=l.end(),{exitCode:E,stdout:o,stderr:h}})}at.getExecOutput=ca});var fo=de((Il,co)=>{var Ks=Object.defineProperty,fa=Object.getOwnPropertyDescriptor,ua=Object.getOwnPropertyNames,da=Object.prototype.hasOwnProperty,pa=(s,t)=>Ks(s,"name",{value:t,configurable:!0}),ma=(s,t)=>{for(var e in t)Ks(s,e,{get:t[e],enumerable:!0})},ga=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ua(t))!da.call(s,r)&&r!==e&&Ks(s,r,{get:()=>t[r],enumerable:!(i=fa(t,r))||i.enumerable});return s},wa=s=>ga(Ks({},"__esModule",{value:!0}),s),lo={};ma(lo,{default:()=>Sa});co.exports=wa(lo);var ya=ao(),ba=pa(s=>new Promise((t,e)=>{let i="";ya.exec(s,[],{listeners:{stdout:r=>{i+=r.toString()}}}).then(()=>t(i)).catch(r=>e(r))}),"execute"),Sa=ba});var Ca={};So(Ca,{cleanLogs:()=>Oa,compactString:()=>Tr,dependencyCount:()=>va,generateSecrets:()=>_a,globalDependencyCount:()=>Ea,jsFiles:()=>Wh,prohibitedCommands:()=>xa,pyFiles:()=>Ih,scan:()=>Gs,scanPure:()=>Lh,shellFiles:()=>Ph});module.exports=vo(Ca);var Cr=ni(require("fs"));var sn=ni(Hr(),1);var hi=s=>{if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>65536)throw new TypeError("pattern is too long")};var Ro={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ai=s=>s.replace(/[[\]\\-]/g,"\\$&"),Do=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Vr=s=>s.join(""),Kr=(s,t)=>{let e=t;if(s.charAt(e)!=="[")throw new Error("not in a brace expression");let i=[],r=[],o=e+1,h=!1,a=!1,l=!1,c=!1,f=e,d="";t:for(;o<s.length;){let m=s.charAt(o);if((m==="!"||m==="^")&&o===e+1){c=!0,o++;continue}if(m==="]"&&h&&!l){f=o+1;break}if(h=!0,m==="\\"&&!l){l=!0,o++;continue}if(m==="["&&!l){for(let[S,[b,x,C]]of Object.entries(Ro))if(s.startsWith(S,o)){if(d)return["$.",!1,s.length-e,!0];o+=S.length,C?r.push(b):i.push(b),a=a||x;continue t}}if(l=!1,d){m>d?i.push(ai(d)+"-"+ai(m)):m===d&&i.push(ai(m)),d="",o++;continue}if(s.startsWith("-]",o+1)){i.push(ai(m+"-")),o+=2;continue}if(s.startsWith("-",o+1)){d=m,o+=2;continue}i.push(ai(m)),o++}if(f<o)return["",!1,0,!1];if(!i.length&&!r.length)return["$.",!1,s.length-e,!0];if(r.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!c){let m=i[0].length===2?i[0].slice(-1):i[0];return[Do(m),!1,f-e,!1]}let g="["+(c?"^":"")+Vr(i)+"]",y="["+(c?"":"^")+Vr(r)+"]";return[i.length&&r.length?"("+g+"|"+y+")":i.length?g:y,a,f-e,!0]};var bt=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var ko=new Set(["!","?","+","*","@"]),Yr=s=>ko.has(s),Fo="(?!(?:^|/)\\.\\.?(?:$|/))",ds="(?!\\.)",No=new Set(["[","."]),jo=new Set(["..","."]),Mo=new Set("().*{}+?[]^$\\!"),Lo=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Zs="[^/]",Qr=Zs+"*?",Xr=Zs+"+?",I,U,$t,N,W,Jt,pe,Zt,Bt,me,li,ms,Jr,De,ps,ci,Js,gs,Zr,rt=class{constructor(t,e,i={}){p(this,ms);p(this,ci);T(this,"type");p(this,I,void 0);p(this,U,void 0);p(this,$t,!1);p(this,N,[]);p(this,W,void 0);p(this,Jt,void 0);p(this,pe,void 0);p(this,Zt,!1);p(this,Bt,void 0);p(this,me,void 0);p(this,li,!1);this.type=t,t&&u(this,U,!0),u(this,W,e),u(this,I,n(this,W)?n(n(this,W),I):this),u(this,Bt,n(this,I)===this?i:n(n(this,I),Bt)),u(this,pe,n(this,I)===this?[]:n(n(this,I),pe)),t==="!"&&!n(n(this,I),Zt)&&n(this,pe).push(this),u(this,Jt,n(this,W)?n(n(this,W),N).length:0)}get hasMagic(){if(n(this,U)!==void 0)return n(this,U);for(let t of n(this,N))if(typeof t!="string"&&(t.type||t.hasMagic))return u(this,U,!0);return n(this,U)}toString(){return n(this,me)!==void 0?n(this,me):this.type?u(this,me,this.type+"("+n(this,N).map(t=>String(t)).join("|")+")"):u(this,me,n(this,N).map(t=>String(t)).join(""))}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof rt&&n(e,W)===this))throw new Error("invalid part: "+e);n(this,N).push(e)}}toJSON(){var e;let t=this.type===null?n(this,N).slice().map(i=>typeof i=="string"?i:i.toJSON()):[this.type,...n(this,N).map(i=>i.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===n(this,I)||n(n(this,I),Zt)&&((e=n(this,W))==null?void 0:e.type)==="!")&&t.push({}),t}isStart(){var e;if(n(this,I)===this)return!0;if(!((e=n(this,W))!=null&&e.isStart()))return!1;if(n(this,Jt)===0)return!0;let t=n(this,W);for(let i=0;i<n(this,Jt);i++){let r=n(t,N)[i];if(!(r instanceof rt&&r.type==="!"))return!1}return!0}isEnd(){var e,i,r;if(n(this,I)===this||((e=n(this,W))==null?void 0:e.type)==="!")return!0;if(!((i=n(this,W))!=null&&i.isEnd()))return!1;if(!this.type)return(r=n(this,W))==null?void 0:r.isEnd();let t=n(this,W)?n(n(this,W),N).length:0;return n(this,Jt)===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new rt(this.type,t);for(let i of n(this,N))e.copyIn(i);return e}static fromGlob(t,e={}){var r;let i=new rt(null,void 0,e);return w(r=rt,De,ps).call(r,t,i,0,e),i}toMMPattern(){if(this!==n(this,I))return n(this,I).toMMPattern();let t=this.toString(),[e,i,r,o]=this.toRegExpSource();if(!(r||n(this,U)||n(this,Bt).nocase&&!n(this,Bt).nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return i;let a=(n(this,Bt).nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}toRegExpSource(t){var l;let e=t??!!n(this,Bt).dot;if(n(this,I)===this&&w(this,ms,Jr).call(this),!this.type){let c=this.isStart()&&this.isEnd(),f=n(this,N).map(E=>{var C;let[m,S,b,x]=typeof E=="string"?w(C=rt,gs,Zr).call(C,E,n(this,U),c):E.toRegExpSource(t);return u(this,U,n(this,U)||b),u(this,$t,n(this,$t)||x),m}).join(""),d="";if(this.isStart()&&typeof n(this,N)[0]=="string"&&!(n(this,N).length===1&&jo.has(n(this,N)[0]))){let m=No,S=e&&m.has(f.charAt(0))||f.startsWith("\\.")&&m.has(f.charAt(2))||f.startsWith("\\.\\.")&&m.has(f.charAt(4)),b=!e&&!t&&m.has(f.charAt(0));d=S?Fo:b?ds:""}let g="";return this.isEnd()&&n(n(this,I),Zt)&&((l=n(this,W))==null?void 0:l.type)==="!"&&(g="(?:$|\\/)"),[d+f+g,bt(f),u(this,U,!!n(this,U)),n(this,$t)]}let i=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:",o=w(this,ci,Js).call(this,e);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return u(this,N,[c]),this.type=null,u(this,U,void 0),[c,bt(this.toString()),!1,!1]}let h=!i||t||e||!ds?"":w(this,ci,Js).call(this,!0);h===o&&(h=""),h&&(o=`(?:${o})(?:${h})*?`);let a="";if(this.type==="!"&&n(this,li))a=(this.isStart()&&!e?ds:"")+Xr;else{let c=this.type==="!"?"))"+(this.isStart()&&!e&&!t?ds:"")+Qr+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&h?")":this.type==="*"&&h?")?":`)${this.type}`;a=r+o+c}return[a,bt(o),u(this,U,!!n(this,U)),n(this,$t)]}},te=rt;I=new WeakMap,U=new WeakMap,$t=new WeakMap,N=new WeakMap,W=new WeakMap,Jt=new WeakMap,pe=new WeakMap,Zt=new WeakMap,Bt=new WeakMap,me=new WeakMap,li=new WeakMap,ms=new WeakSet,Jr=function(){if(this!==n(this,I))throw new Error("should only call on root");if(n(this,Zt))return this;this.toString(),u(this,Zt,!0);let t;for(;t=n(this,pe).pop();){if(t.type!=="!")continue;let e=t,i=n(e,W);for(;i;){for(let r=n(e,Jt)+1;!i.type&&r<n(i,N).length;r++)for(let o of n(t,N)){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n(i,N)[r])}e=i,i=n(e,W)}}return this},De=new WeakSet,ps=function(t,e,i,r){var y,E;let o=!1,h=!1,a=-1,l=!1;if(e.type===null){let m=i,S="";for(;m<t.length;){let b=t.charAt(m++);if(o||b==="\\"){o=!o,S+=b;continue}if(h){m===a+1?(b==="^"||b==="!")&&(l=!0):b==="]"&&!(m===a+2&&l)&&(h=!1),S+=b;continue}else if(b==="["){h=!0,a=m,l=!1,S+=b;continue}if(!r.noext&&Yr(b)&&t.charAt(m)==="("){e.push(S),S="";let x=new rt(b,e);m=w(y=rt,De,ps).call(y,t,x,m,r),e.push(x);continue}S+=b}return e.push(S),m}let c=i+1,f=new rt(null,e),d=[],g="";for(;c<t.length;){let m=t.charAt(c++);if(o||m==="\\"){o=!o,g+=m;continue}if(h){c===a+1?(m==="^"||m==="!")&&(l=!0):m==="]"&&!(c===a+2&&l)&&(h=!1),g+=m;continue}else if(m==="["){h=!0,a=c,l=!1,g+=m;continue}if(Yr(m)&&t.charAt(c)==="("){f.push(g),g="";let S=new rt(m,f);f.push(S),c=w(E=rt,De,ps).call(E,t,S,c,r);continue}if(m==="|"){f.push(g),g="",d.push(f),f=new rt(null,e);continue}if(m===")")return g===""&&n(e,N).length===0&&u(e,li,!0),f.push(g),g="",e.push(...d,f),c;g+=m}return e.type=null,u(e,U,void 0),u(e,N,[t.substring(i-1)]),c},ci=new WeakSet,Js=function(t){return n(this,N).map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[i,r,o,h]=e.toRegExpSource(t);return u(this,$t,n(this,$t)||h),i}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")},gs=new WeakSet,Zr=function(t,e,i=!1){let r=!1,o="",h=!1;for(let a=0;a<t.length;a++){let l=t.charAt(a);if(r){r=!1,o+=(Mo.has(l)?"\\":"")+l;continue}if(l==="\\"){a===t.length-1?o+="\\\\":r=!0;continue}if(l==="["){let[c,f,d,g]=Kr(t,a);if(d){o+=c,h=h||f,a+=d-1,e=e||g;continue}}if(l==="*"){i&&t==="*"?o+=Xr:o+=Qr,e=!0;continue}if(l==="?"){o+=Zs,e=!0;continue}o+=Lo(l)}return[o,bt(t),!!e,h]},p(te,De),p(te,gs);var ke=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");var tt=(s,t,e={})=>(hi(t),!e.nocomment&&t.charAt(0)==="#"?!1:new lt(t,e).match(s)),Po=/^\*+([^+@!?\*\[\(]*)$/,Wo=s=>t=>!t.startsWith(".")&&t.endsWith(s),Io=s=>t=>t.endsWith(s),$o=s=>(s=s.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(s)),Bo=s=>(s=s.toLowerCase(),t=>t.toLowerCase().endsWith(s)),zo=/^\*+\.\*+$/,Uo=s=>!s.startsWith(".")&&s.includes("."),Go=s=>s!=="."&&s!==".."&&s.includes("."),qo=/^\.\*+$/,Ho=s=>s!=="."&&s!==".."&&s.startsWith("."),Vo=/^\*+$/,Ko=s=>s.length!==0&&!s.startsWith("."),Yo=s=>s.length!==0&&s!=="."&&s!=="..",Qo=/^\?+([^+@!?\*\[\(]*)?$/,Xo=([s,t=""])=>{let e=rn([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},Jo=([s,t=""])=>{let e=nn([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},Zo=([s,t=""])=>{let e=nn([s]);return t?i=>e(i)&&i.endsWith(t):e},th=([s,t=""])=>{let e=rn([s]);return t?i=>e(i)&&i.endsWith(t):e},rn=([s])=>{let t=s.length;return e=>e.length===t&&!e.startsWith(".")},nn=([s])=>{let t=s.length;return e=>e.length===t&&e!=="."&&e!==".."},on=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",tn={win32:{sep:"\\"},posix:{sep:"/"}},eh=on==="win32"?tn.win32.sep:tn.posix.sep;tt.sep=eh;var Y=Symbol("globstar **");tt.GLOBSTAR=Y;var ih="[^/]",sh=ih+"*?",rh="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",nh="(?:(?!(?:\\/|^)\\.).)*?",oh=(s,t={})=>e=>tt(e,s,t);tt.filter=oh;var mt=(s,t={})=>Object.assign({},s,t),hh=s=>{if(!s||typeof s!="object"||!Object.keys(s).length)return tt;let t=tt;return Object.assign((i,r,o={})=>t(i,r,mt(s,o)),{Minimatch:class extends t.Minimatch{constructor(r,o={}){super(r,mt(s,o))}static defaults(r){return t.defaults(mt(s,r)).Minimatch}},AST:class extends t.AST{constructor(r,o,h={}){super(r,o,mt(s,h))}static fromGlob(r,o={}){return t.AST.fromGlob(r,mt(s,o))}},unescape:(i,r={})=>t.unescape(i,mt(s,r)),escape:(i,r={})=>t.escape(i,mt(s,r)),filter:(i,r={})=>t.filter(i,mt(s,r)),defaults:i=>t.defaults(mt(s,i)),makeRe:(i,r={})=>t.makeRe(i,mt(s,r)),braceExpand:(i,r={})=>t.braceExpand(i,mt(s,r)),match:(i,r,o={})=>t.match(i,r,mt(s,o)),sep:t.sep,GLOBSTAR:Y})};tt.defaults=hh;var hn=(s,t={})=>(hi(s),t.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:(0,sn.default)(s));tt.braceExpand=hn;var ah=(s,t={})=>new lt(s,t).makeRe();tt.makeRe=ah;var lh=(s,t,e={})=>{let i=new lt(t,e);return s=s.filter(r=>i.match(r)),i.options.nonull&&!s.length&&s.push(t),s};tt.match=lh;var en=/[?*]|[+@!]\(.*?\)|\[|\]/,ch=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),lt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){hi(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||on,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let r=this.globParts.map((o,h,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!en.test(o[2]))&&!en.test(o[3]),c=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(c)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,r),this.set=r.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let h=this.set[o];h[0]===""&&h[1]===""&&this.globParts[o][2]==="?"&&typeof h[3]=="string"&&/^[a-z]:$/i.test(h[3])&&(h[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let i=0;i<t.length;i++)for(let r=0;r<t[i].length;r++)t[i][r]==="**"&&(t[i][r]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let i=-1;for(;(i=e.indexOf("**",i+1))!==-1;){let r=i;for(;e[r+1]==="**";)r++;r!==i&&e.splice(i,r-i)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((i,r)=>{let o=i[i.length-1];return r==="**"&&o==="**"?i:r===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(i.pop(),i):(i.push(r),i)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let r=1;r<t.length-1;r++){let o=t[r];r===1&&o===""&&t[0]===""||(o==="."||o==="")&&(e=!0,t.splice(r,1),r--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let i=0;for(;(i=t.indexOf("..",i+1))!==-1;){let r=t[i-1];r&&r!=="."&&r!==".."&&r!=="**"&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let r=-1;for(;(r=i.indexOf("**",r+1))!==-1;){let h=r;for(;i[h+1]==="**";)h++;h>r&&i.splice(r+1,h-r);let a=i[r+1],l=i[r+2],c=i[r+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;e=!0,i.splice(r,1);let f=i.slice(0);f[r]="**",t.push(f),r--}if(!this.preserveMultipleSlashes){for(let h=1;h<i.length-1;h++){let a=i[h];h===1&&a===""&&i[0]===""||(a==="."||a==="")&&(e=!0,i.splice(h,1),h--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(e=!0,i.pop())}let o=0;for(;(o=i.indexOf("..",o+1))!==-1;){let h=i[o-1];if(h&&h!=="."&&h!==".."&&h!=="**"){e=!0;let l=o===1&&i[o+1]==="**"?["."]:[];i.splice(o-1,2,...l),i.length===0&&i.push(""),o-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){let r=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);r&&(t[e]=r,t[i]=[])}return t.filter(e=>e.length)}partsMatch(t,e,i=!1){let r=0,o=0,h=[],a="";for(;r<t.length&&o<e.length;)if(t[r]===e[o])h.push(a==="b"?e[o]:t[r]),r++,o++;else if(i&&t[r]==="**"&&e[o]===t[r+1])h.push(t[r]),r++;else if(i&&e[o]==="**"&&t[r]===e[o+1])h.push(e[o]),o++;else if(t[r]==="*"&&e[o]&&(this.options.dot||!e[o].startsWith("."))&&e[o]!=="**"){if(a==="b")return!1;a="a",h.push(t[r]),r++,o++}else if(e[o]==="*"&&t[r]&&(this.options.dot||!t[r].startsWith("."))&&t[r]!=="**"){if(a==="a")return!1;a="b",h.push(e[o]),r++,o++}else return!1;return t.length===e.length&&h}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,i=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){let r=this.options;if(this.isWindows){let m=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),S=!m&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),x=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),C=S?3:m?0:void 0,A=x?3:b?0:void 0;if(typeof C=="number"&&typeof A=="number"){let[D,P]=[t[C],e[A]];D.toLowerCase()===P.toLowerCase()&&(e[A]=D,A>C?e=e.slice(A):C>A&&(t=t.slice(C)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var h=0,a=0,l=t.length,c=e.length;h<l&&a<c;h++,a++){this.debug("matchOne loop");var f=e[a],d=t[h];if(this.debug(e,f,d),f===!1)return!1;if(f===Y){this.debug("GLOBSTAR",[e,f,d]);var g=h,y=a+1;if(y===c){for(this.debug("** at the end");h<l;h++)if(t[h]==="."||t[h]===".."||!r.dot&&t[h].charAt(0)===".")return!1;return!0}for(;g<l;){var E=t[g];if(this.debug(`
globstar while`,t,g,e,y,E),this.matchOne(t.slice(g),e.slice(y),i))return this.debug("globstar found match!",g,l,E),!0;if(E==="."||E===".."||!r.dot&&E.charAt(0)==="."){this.debug("dot detected!",t,g,e,y);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(i&&(this.debug(`
>>> no match, partial?`,t,g,e,y),g===l))}let m;if(typeof f=="string"?(m=d===f,this.debug("string match",f,d,m)):(m=f.test(d),this.debug("pattern match",f,d,m)),!m)return!1}if(h===l&&a===c)return!0;if(h===l)return i;if(a===c)return h===l-1&&t[h]==="";throw new Error("wtf?")}braceExpand(){return hn(this.pattern,this.options)}parse(t){hi(t);let e=this.options;if(t==="**")return Y;if(t==="")return"";let i,r=null;(i=t.match(Vo))?r=e.dot?Yo:Ko:(i=t.match(Po))?r=(e.nocase?e.dot?Bo:$o:e.dot?Io:Wo)(i[1]):(i=t.match(Qo))?r=(e.nocase?e.dot?Jo:Xo:e.dot?Zo:th)(i):(i=t.match(zo))?r=e.dot?Go:Uo:(i=t.match(qo))&&(r=Ho);let o=te.fromGlob(t,this.options).toMMPattern();return r?Object.assign(o,{test:r}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,i=e.noglobstar?sh:e.dot?rh:nh,r=new Set(e.nocase?["i"]:[]),o=t.map(l=>{let c=l.map(f=>{if(f instanceof RegExp)for(let d of f.flags.split(""))r.add(d);return typeof f=="string"?ch(f):f===Y?Y:f._src});return c.forEach((f,d)=>{let g=c[d+1],y=c[d-1];f!==Y||y===Y||(y===void 0?g!==void 0&&g!==Y?c[d+1]="(?:\\/|"+i+"\\/)?"+g:c[d]=i:g===void 0?c[d-1]=y+"(?:\\/|"+i+")?":g!==Y&&(c[d-1]=y+"(?:\\/|\\/"+i+"\\/)"+g,c[d+1]=Y))}),c.filter(f=>f!==Y).join("/")}).join("|"),[h,a]=t.length>1?["(?:",")"]:["",""];o="^"+h+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let i=this.options;this.isWindows&&(t=t.split("\\").join("/"));let r=this.slashSplit(t);this.debug(this.pattern,"split",r);let o=this.set;this.debug(this.pattern,"set",o);let h=r[r.length-1];if(!h)for(let a=r.length-2;!h&&a>=0;a--)h=r[a];for(let a=0;a<o.length;a++){let l=o[a],c=r;if(i.matchBase&&l.length===1&&(c=[h]),this.matchOne(c,l,e))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(t){return tt.defaults(t).Minimatch}};tt.AST=te;tt.Minimatch=lt;tt.escape=ke;tt.unescape=bt;var fi=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,cn=new Set,tr=typeof process=="object"&&process?process:{},fn=(s,t,e,i)=>{typeof tr.emitWarning=="function"?tr.emitWarning(s,t,e,i):console.error(`[${e}] ${t}: ${s}`)},Ss=globalThis.AbortController,an=globalThis.AbortSignal,ln;if(typeof Ss>"u"){an=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,r){this._onabort.push(r)}},Ss=class{constructor(){t()}signal=new an;abort(i){var r,o;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let h of this.signal._onabort)h(i);(o=(r=this.signal).onabort)==null||o.call(r,i)}}};let s=((ln=tr.env)==null?void 0:ln.LRU_CACHE_IGNORE_AC_WARNING)!=="1",t=()=>{s&&(s=!1,fn("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var fh=s=>!cn.has(s),Qa=Symbol("type"),ee=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),un=s=>ee(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?Ne:null:null,Ne=class extends Array{constructor(t){super(t),this.fill(0)}},je,Fe=class{heap;length;static create(t){let e=un(t);if(!e)return[];u(Fe,je,!0);let i=new Fe(t,e);return u(Fe,je,!1),i}constructor(t,e){if(!n(Fe,je))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},ws=Fe;je=new WeakMap,p(ws,je,!1);var St,ct,Dt,vt,Me,$,Et,B,F,O,et,ft,X,G,xt,Q,zt,Ut,_t,kt,re,nt,pi,er,ge,Gt,mi,ut,vs,dn,we,Le,gi,Ft,ie,Nt,se,wi,ir,Pe,ys,We,bs,k,j,yi,sr,ye,ui,rr=class{constructor(t){p(this,pi);p(this,vs);p(this,Ft);p(this,Nt);p(this,wi);p(this,Pe);p(this,We);p(this,k);p(this,yi);p(this,ye);p(this,St,void 0);p(this,ct,void 0);p(this,Dt,void 0);p(this,vt,void 0);p(this,Me,void 0);T(this,"ttl");T(this,"ttlResolution");T(this,"ttlAutopurge");T(this,"updateAgeOnGet");T(this,"updateAgeOnHas");T(this,"allowStale");T(this,"noDisposeOnSet");T(this,"noUpdateTTL");T(this,"maxEntrySize");T(this,"sizeCalculation");T(this,"noDeleteOnFetchRejection");T(this,"noDeleteOnStaleGet");T(this,"allowStaleOnFetchAbort");T(this,"allowStaleOnFetchRejection");T(this,"ignoreFetchAbort");p(this,$,void 0);p(this,Et,void 0);p(this,B,void 0);p(this,F,void 0);p(this,O,void 0);p(this,et,void 0);p(this,ft,void 0);p(this,X,void 0);p(this,G,void 0);p(this,xt,void 0);p(this,Q,void 0);p(this,zt,void 0);p(this,Ut,void 0);p(this,_t,void 0);p(this,kt,void 0);p(this,re,void 0);p(this,nt,void 0);p(this,ge,()=>{});p(this,Gt,()=>{});p(this,mi,()=>{});p(this,ut,()=>!1);p(this,we,t=>{});p(this,Le,(t,e,i)=>{});p(this,gi,(t,e,i,r)=>{if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:e=0,ttl:i,ttlResolution:r=1,ttlAutopurge:o,updateAgeOnGet:h,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:f,noDisposeOnSet:d,noUpdateTTL:g,maxSize:y=0,maxEntrySize:E=0,sizeCalculation:m,fetchMethod:S,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:x,allowStaleOnFetchRejection:C,allowStaleOnFetchAbort:A,ignoreFetchAbort:D}=t;if(e!==0&&!ee(e))throw new TypeError("max option must be a nonnegative integer");let P=e?un(e):Array;if(!P)throw new Error("invalid max value: "+e);if(u(this,St,e),u(this,ct,y),this.maxEntrySize=E||n(this,ct),this.sizeCalculation=m,this.sizeCalculation){if(!n(this,ct)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("fetchMethod must be a function if specified");if(u(this,Me,S),u(this,re,!!S),u(this,B,new Map),u(this,F,new Array(e).fill(void 0)),u(this,O,new Array(e).fill(void 0)),u(this,et,new P(e)),u(this,ft,new P(e)),u(this,X,0),u(this,G,0),u(this,xt,ws.create(e)),u(this,$,0),u(this,Et,0),typeof c=="function"&&u(this,Dt,c),typeof f=="function"?(u(this,vt,f),u(this,Q,[])):(u(this,vt,void 0),u(this,Q,void 0)),u(this,kt,!!n(this,Dt)),u(this,nt,!!n(this,vt)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!C,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!D,this.maxEntrySize!==0){if(n(this,ct)!==0&&!ee(n(this,ct)))throw new TypeError("maxSize must be a positive integer if specified");if(!ee(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");w(this,vs,dn).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!x,this.updateAgeOnGet=!!h,this.updateAgeOnHas=!!a,this.ttlResolution=ee(r)||r===0?r:1,this.ttlAutopurge=!!o,this.ttl=i||0,this.ttl){if(!ee(this.ttl))throw new TypeError("ttl must be a positive integer if specified");w(this,pi,er).call(this)}if(n(this,St)===0&&this.ttl===0&&n(this,ct)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!n(this,St)&&!n(this,ct)){let yt="LRU_CACHE_UNBOUNDED";fh(yt)&&(cn.add(yt),fn("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",yt,rr))}}static unsafeExposeInternals(t){return{starts:n(t,Ut),ttls:n(t,_t),sizes:n(t,zt),keyMap:n(t,B),keyList:n(t,F),valList:n(t,O),next:n(t,et),prev:n(t,ft),get head(){return n(t,X)},get tail(){return n(t,G)},free:n(t,xt),isBackgroundFetch:e=>{var i;return w(i=t,k,j).call(i,e)},backgroundFetch:(e,i,r,o)=>{var h;return w(h=t,We,bs).call(h,e,i,r,o)},moveToTail:e=>{var i;return w(i=t,ye,ui).call(i,e)},indexes:e=>{var i;return w(i=t,Ft,ie).call(i,e)},rindexes:e=>{var i;return w(i=t,Nt,se).call(i,e)},isStale:e=>{var i;return n(i=t,ut).call(i,e)}}}get max(){return n(this,St)}get maxSize(){return n(this,ct)}get calculatedSize(){return n(this,Et)}get size(){return n(this,$)}get fetchMethod(){return n(this,Me)}get dispose(){return n(this,Dt)}get disposeAfter(){return n(this,vt)}getRemainingTTL(t){return n(this,B).has(t)?1/0:0}*entries(){for(let t of w(this,Ft,ie).call(this))n(this,O)[t]!==void 0&&n(this,F)[t]!==void 0&&!w(this,k,j).call(this,n(this,O)[t])&&(yield[n(this,F)[t],n(this,O)[t]])}*rentries(){for(let t of w(this,Nt,se).call(this))n(this,O)[t]!==void 0&&n(this,F)[t]!==void 0&&!w(this,k,j).call(this,n(this,O)[t])&&(yield[n(this,F)[t],n(this,O)[t]])}*keys(){for(let t of w(this,Ft,ie).call(this)){let e=n(this,F)[t];e!==void 0&&!w(this,k,j).call(this,n(this,O)[t])&&(yield e)}}*rkeys(){for(let t of w(this,Nt,se).call(this)){let e=n(this,F)[t];e!==void 0&&!w(this,k,j).call(this,n(this,O)[t])&&(yield e)}}*values(){for(let t of w(this,Ft,ie).call(this))n(this,O)[t]!==void 0&&!w(this,k,j).call(this,n(this,O)[t])&&(yield n(this,O)[t])}*rvalues(){for(let t of w(this,Nt,se).call(this))n(this,O)[t]!==void 0&&!w(this,k,j).call(this,n(this,O)[t])&&(yield n(this,O)[t])}[Symbol.iterator](){return this.entries()}find(t,e={}){for(let i of w(this,Ft,ie).call(this)){let r=n(this,O)[i],o=w(this,k,j).call(this,r)?r.__staleWhileFetching:r;if(o!==void 0&&t(o,n(this,F)[i],this))return this.get(n(this,F)[i],e)}}forEach(t,e=this){for(let i of w(this,Ft,ie).call(this)){let r=n(this,O)[i],o=w(this,k,j).call(this,r)?r.__staleWhileFetching:r;o!==void 0&&t.call(e,o,n(this,F)[i],this)}}rforEach(t,e=this){for(let i of w(this,Nt,se).call(this)){let r=n(this,O)[i],o=w(this,k,j).call(this,r)?r.__staleWhileFetching:r;o!==void 0&&t.call(e,o,n(this,F)[i],this)}}purgeStale(){let t=!1;for(let e of w(this,Nt,se).call(this,{allowStale:!0}))n(this,ut).call(this,e)&&(this.delete(n(this,F)[e]),t=!0);return t}dump(){let t=[];for(let e of w(this,Ft,ie).call(this,{allowStale:!0})){let i=n(this,F)[e],r=n(this,O)[e],o=w(this,k,j).call(this,r)?r.__staleWhileFetching:r;if(o===void 0||i===void 0)continue;let h={value:o};if(n(this,_t)&&n(this,Ut)){h.ttl=n(this,_t)[e];let a=fi.now()-n(this,Ut)[e];h.start=Math.floor(Date.now()-a)}n(this,zt)&&(h.size=n(this,zt)[e]),t.unshift([i,h])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let r=Date.now()-i.start;i.start=fi.now()-r}this.set(e,i.value,i)}}set(t,e,i={}){var g,y,E;if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:o,noDisposeOnSet:h=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=i,{noUpdateTTL:c=this.noUpdateTTL}=i,f=n(this,gi).call(this,t,e,i.size||0,a);if(this.maxEntrySize&&f>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(t),this;let d=n(this,$)===0?void 0:n(this,B).get(t);if(d===void 0)d=n(this,$)===0?n(this,G):n(this,xt).length!==0?n(this,xt).pop():n(this,$)===n(this,St)?w(this,Pe,ys).call(this,!1):n(this,$),n(this,F)[d]=t,n(this,O)[d]=e,n(this,B).set(t,d),n(this,et)[n(this,G)]=d,n(this,ft)[d]=n(this,G),u(this,G,d),us(this,$)._++,n(this,Le).call(this,d,f,l),l&&(l.set="add"),c=!1;else{w(this,ye,ui).call(this,d);let m=n(this,O)[d];if(e!==m){if(n(this,re)&&w(this,k,j).call(this,m)?m.__abortController.abort(new Error("replaced")):h||(n(this,kt)&&((g=n(this,Dt))==null||g.call(this,m,t,"set")),n(this,nt)&&((y=n(this,Q))==null||y.push([m,t,"set"]))),n(this,we).call(this,d),n(this,Le).call(this,d,f,l),n(this,O)[d]=e,l){l.set="replace";let S=m&&w(this,k,j).call(this,m)?m.__staleWhileFetching:m;S!==void 0&&(l.oldValue=S)}}else l&&(l.set="update")}if(r!==0&&!n(this,_t)&&w(this,pi,er).call(this),n(this,_t)&&(c||n(this,mi).call(this,d,r,o),l&&n(this,Gt).call(this,l,d)),!h&&n(this,nt)&&n(this,Q)){let m=n(this,Q),S;for(;S=m==null?void 0:m.shift();)(E=n(this,vt))==null||E.call(this,...S)}return this}pop(){var t;try{for(;n(this,$);){let e=n(this,O)[n(this,X)];if(w(this,Pe,ys).call(this,!0),w(this,k,j).call(this,e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(n(this,nt)&&n(this,Q)){let e=n(this,Q),i;for(;i=e==null?void 0:e.shift();)(t=n(this,vt))==null||t.call(this,...i)}}}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:r}=e,o=n(this,B).get(t);if(o!==void 0){let h=n(this,O)[o];if(w(this,k,j).call(this,h)&&h.__staleWhileFetching===void 0)return!1;if(n(this,ut).call(this,o))r&&(r.has="stale",n(this,Gt).call(this,r,o));else return i&&n(this,ge).call(this,o),r&&(r.has="hit",n(this,Gt).call(this,r,o)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,r=n(this,B).get(t);if(r!==void 0&&(i||!n(this,ut).call(this,r))){let o=n(this,O)[r];return w(this,k,j).call(this,o)?o.__staleWhileFetching:o}}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:h=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:y=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:m,forceRefresh:S=!1,status:b,signal:x}=e;if(!n(this,re))return b&&(b.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:o,status:b});let C={allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:o,ttl:h,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:f,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:E,ignoreFetchAbort:y,status:b,signal:x},A=n(this,B).get(t);if(A===void 0){b&&(b.fetch="miss");let D=w(this,We,bs).call(this,t,A,C,m);return D.__returned=D}else{let D=n(this,O)[A];if(w(this,k,j).call(this,D)){let fs=i&&D.__staleWhileFetching!==void 0;return b&&(b.fetch="inflight",fs&&(b.returnedStale=!0)),fs?D.__staleWhileFetching:D.__returned=D}let P=n(this,ut).call(this,A);if(!S&&!P)return b&&(b.fetch="hit"),w(this,ye,ui).call(this,A),r&&n(this,ge).call(this,A),b&&n(this,Gt).call(this,b,A),D;let yt=w(this,We,bs).call(this,t,A,C,m),Rt=yt.__staleWhileFetching!==void 0&&i;return b&&(b.fetch=P?"stale":"refresh",Rt&&P&&(b.returnedStale=!0)),Rt?yt.__staleWhileFetching:yt.__returned=yt}}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:h}=e,a=n(this,B).get(t);if(a!==void 0){let l=n(this,O)[a],c=w(this,k,j).call(this,l);return h&&n(this,Gt).call(this,h,a),n(this,ut).call(this,a)?(h&&(h.get="stale"),c?(h&&i&&l.__staleWhileFetching!==void 0&&(h.returnedStale=!0),i?l.__staleWhileFetching:void 0):(o||this.delete(t),h&&i&&(h.returnedStale=!0),i?l:void 0)):(h&&(h.get="hit"),c?l.__staleWhileFetching:(w(this,ye,ui).call(this,a),r&&n(this,ge).call(this,a),l))}else h&&(h.get="miss")}delete(t){var i,r,o,h;let e=!1;if(n(this,$)!==0){let a=n(this,B).get(t);if(a!==void 0)if(e=!0,n(this,$)===1)this.clear();else{n(this,we).call(this,a);let l=n(this,O)[a];w(this,k,j).call(this,l)?l.__abortController.abort(new Error("deleted")):(n(this,kt)||n(this,nt))&&(n(this,kt)&&((i=n(this,Dt))==null||i.call(this,l,t,"delete")),n(this,nt)&&((r=n(this,Q))==null||r.push([l,t,"delete"]))),n(this,B).delete(t),n(this,F)[a]=void 0,n(this,O)[a]=void 0,a===n(this,G)?u(this,G,n(this,ft)[a]):a===n(this,X)?u(this,X,n(this,et)[a]):(n(this,et)[n(this,ft)[a]]=n(this,et)[a],n(this,ft)[n(this,et)[a]]=n(this,ft)[a]),us(this,$)._--,n(this,xt).push(a)}}if(n(this,nt)&&((o=n(this,Q))!=null&&o.length)){let a=n(this,Q),l;for(;l=a==null?void 0:a.shift();)(h=n(this,vt))==null||h.call(this,...l)}return e}clear(){var t,e,i;for(let r of w(this,Nt,se).call(this,{allowStale:!0})){let o=n(this,O)[r];if(w(this,k,j).call(this,o))o.__abortController.abort(new Error("deleted"));else{let h=n(this,F)[r];n(this,kt)&&((t=n(this,Dt))==null||t.call(this,o,h,"delete")),n(this,nt)&&((e=n(this,Q))==null||e.push([o,h,"delete"]))}}if(n(this,B).clear(),n(this,O).fill(void 0),n(this,F).fill(void 0),n(this,_t)&&n(this,Ut)&&(n(this,_t).fill(0),n(this,Ut).fill(0)),n(this,zt)&&n(this,zt).fill(0),u(this,X,0),u(this,G,0),n(this,xt).length=0,u(this,Et,0),u(this,$,0),n(this,nt)&&n(this,Q)){let r=n(this,Q),o;for(;o=r==null?void 0:r.shift();)(i=n(this,vt))==null||i.call(this,...o)}}},di=rr;St=new WeakMap,ct=new WeakMap,Dt=new WeakMap,vt=new WeakMap,Me=new WeakMap,$=new WeakMap,Et=new WeakMap,B=new WeakMap,F=new WeakMap,O=new WeakMap,et=new WeakMap,ft=new WeakMap,X=new WeakMap,G=new WeakMap,xt=new WeakMap,Q=new WeakMap,zt=new WeakMap,Ut=new WeakMap,_t=new WeakMap,kt=new WeakMap,re=new WeakMap,nt=new WeakMap,pi=new WeakSet,er=function(){let t=new Ne(n(this,St)),e=new Ne(n(this,St));u(this,_t,t),u(this,Ut,e),u(this,mi,(o,h,a=fi.now())=>{if(e[o]=h!==0?a:0,t[o]=h,h!==0&&this.ttlAutopurge){let l=setTimeout(()=>{n(this,ut).call(this,o)&&this.delete(n(this,F)[o])},h+1);l.unref&&l.unref()}}),u(this,ge,o=>{e[o]=t[o]!==0?fi.now():0}),u(this,Gt,(o,h)=>{if(t[h]){let a=t[h],l=e[h];o.ttl=a,o.start=l,o.now=i||r();let c=o.now-l;o.remainingTTL=a-c}});let i=0,r=()=>{let o=fi.now();if(this.ttlResolution>0){i=o;let h=setTimeout(()=>i=0,this.ttlResolution);h.unref&&h.unref()}return o};this.getRemainingTTL=o=>{let h=n(this,B).get(o);if(h===void 0)return 0;let a=t[h],l=e[h];if(a===0||l===0)return 1/0;let c=(i||r())-l;return a-c},u(this,ut,o=>t[o]!==0&&e[o]!==0&&(i||r())-e[o]>t[o])},ge=new WeakMap,Gt=new WeakMap,mi=new WeakMap,ut=new WeakMap,vs=new WeakSet,dn=function(){let t=new Ne(n(this,St));u(this,Et,0),u(this,zt,t),u(this,we,e=>{u(this,Et,n(this,Et)-t[e]),t[e]=0}),u(this,gi,(e,i,r,o)=>{if(w(this,k,j).call(this,i))return 0;if(!ee(r))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(r=o(i,e),!ee(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r}),u(this,Le,(e,i,r)=>{if(t[e]=i,n(this,ct)){let o=n(this,ct)-t[e];for(;n(this,Et)>o;)w(this,Pe,ys).call(this,!0)}u(this,Et,n(this,Et)+t[e]),r&&(r.entrySize=i,r.totalCalculatedSize=n(this,Et))})},we=new WeakMap,Le=new WeakMap,gi=new WeakMap,Ft=new WeakSet,ie=function*({allowStale:t=this.allowStale}={}){if(n(this,$))for(let e=n(this,G);!(!w(this,wi,ir).call(this,e)||((t||!n(this,ut).call(this,e))&&(yield e),e===n(this,X)));)e=n(this,ft)[e]},Nt=new WeakSet,se=function*({allowStale:t=this.allowStale}={}){if(n(this,$))for(let e=n(this,X);!(!w(this,wi,ir).call(this,e)||((t||!n(this,ut).call(this,e))&&(yield e),e===n(this,G)));)e=n(this,et)[e]},wi=new WeakSet,ir=function(t){return t!==void 0&&n(this,B).get(n(this,F)[t])===t},Pe=new WeakSet,ys=function(t){var o,h;let e=n(this,X),i=n(this,F)[e],r=n(this,O)[e];return n(this,re)&&w(this,k,j).call(this,r)?r.__abortController.abort(new Error("evicted")):(n(this,kt)||n(this,nt))&&(n(this,kt)&&((o=n(this,Dt))==null||o.call(this,r,i,"evict")),n(this,nt)&&((h=n(this,Q))==null||h.push([r,i,"evict"]))),n(this,we).call(this,e),t&&(n(this,F)[e]=void 0,n(this,O)[e]=void 0,n(this,xt).push(e)),n(this,$)===1?(u(this,X,u(this,G,0)),n(this,xt).length=0):u(this,X,n(this,et)[e]),n(this,B).delete(i),us(this,$)._--,e},We=new WeakSet,bs=function(t,e,i,r){let o=e===void 0?void 0:n(this,O)[e];if(w(this,k,j).call(this,o))return o;let h=new Ss,{signal:a}=i;a==null||a.addEventListener("abort",()=>h.abort(a.reason),{signal:h.signal});let l={signal:h.signal,options:i,context:r},c=(m,S=!1)=>{let{aborted:b}=h.signal,x=i.ignoreFetchAbort&&m!==void 0;if(i.status&&(b&&!S?(i.status.fetchAborted=!0,i.status.fetchError=h.signal.reason,x&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),b&&!x&&!S)return d(h.signal.reason);let C=y;return n(this,O)[e]===y&&(m===void 0?C.__staleWhileFetching?n(this,O)[e]=C.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,m,l.options))),m},f=m=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=m),d(m)),d=m=>{let{aborted:S}=h.signal,b=S&&i.allowStaleOnFetchAbort,x=b||i.allowStaleOnFetchRejection,C=x||i.noDeleteOnFetchRejection,A=y;if(n(this,O)[e]===y&&(!C||A.__staleWhileFetching===void 0?this.delete(t):b||(n(this,O)[e]=A.__staleWhileFetching)),x)return i.status&&A.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),A.__staleWhileFetching;if(A.__returned===A)throw m},g=(m,S)=>{var x;let b=(x=n(this,Me))==null?void 0:x.call(this,t,o,l);b&&b instanceof Promise&&b.then(C=>m(C===void 0?void 0:C),S),h.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(m(void 0),i.allowStaleOnFetchAbort&&(m=C=>c(C,!0)))})};i.status&&(i.status.fetchDispatched=!0);let y=new Promise(g).then(c,f),E=Object.assign(y,{__abortController:h,__staleWhileFetching:o,__returned:void 0});return e===void 0?(this.set(t,E,{...l.options,status:void 0}),e=n(this,B).get(t)):n(this,O)[e]=E,E},k=new WeakSet,j=function(t){if(!n(this,re))return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Ss},yi=new WeakSet,sr=function(t,e){n(this,ft)[e]=t,n(this,et)[t]=e},ye=new WeakSet,ui=function(t){t!==n(this,G)&&(t===n(this,X)?u(this,X,n(this,et)[t]):w(this,yi,sr).call(this,n(this,ft)[t],n(this,et)[t]),w(this,yi,sr).call(this,n(this,G),t),u(this,G,t))};var Ke=require("path"),xn=require("url"),vh=ni(require("fs"),1),Wt=require("fs"),ae=require("fs/promises");var As=require("events"),fr=ni(require("stream"),1),yn=require("string_decoder"),pn=typeof process=="object"&&process?process:{stdout:null,stderr:null},uh=s=>!!s&&typeof s=="object"&&(s instanceof oe||s instanceof fr.default||dh(s)||ph(s)),dh=s=>!!s&&typeof s=="object"&&s instanceof As.EventEmitter&&typeof s.pipe=="function"&&s.pipe!==fr.default.Writable.prototype.pipe,ph=s=>!!s&&typeof s=="object"&&s instanceof As.EventEmitter&&typeof s.write=="function"&&typeof s.end=="function",qt=Symbol("EOF"),Ht=Symbol("maybeEmitEnd"),ne=Symbol("emittedEnd"),Es=Symbol("emittingEnd"),bi=Symbol("emittedError"),xs=Symbol("closed"),mn=Symbol("read"),_s=Symbol("flush"),gn=Symbol("flushChunk"),Ot=Symbol("encoding"),Ie=Symbol("decoder"),q=Symbol("flowing"),Si=Symbol("paused"),$e=Symbol("resume"),H=Symbol("buffer"),it=Symbol("pipes"),V=Symbol("bufferLength"),nr=Symbol("bufferPush"),Os=Symbol("bufferShift"),J=Symbol("objectMode"),L=Symbol("destroyed"),or=Symbol("error"),hr=Symbol("emitData"),wn=Symbol("emitEnd"),ar=Symbol("emitEnd2"),jt=Symbol("async"),lr=Symbol("abort"),Cs=Symbol("aborted"),vi=Symbol("signal"),be=Symbol("dataListeners"),dt=Symbol("discarded"),Ei=s=>Promise.resolve().then(s),mh=s=>s(),gh=s=>s==="end"||s==="finish"||s==="prefinish",wh=s=>s instanceof ArrayBuffer||!!s&&typeof s=="object"&&s.constructor&&s.constructor.name==="ArrayBuffer"&&s.byteLength>=0,yh=s=>!Buffer.isBuffer(s)&&ArrayBuffer.isView(s),Ts=class{src;dest;opts;ondrain;constructor(t,e,i){this.src=t,this.dest=e,this.opts=i,this.ondrain=()=>t[$e](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},cr=class extends Ts{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,i){super(t,e,i),this.proxyErrors=r=>e.emit("error",r),t.on("error",this.proxyErrors)}},bh=s=>!!s.objectMode,Sh=s=>!s.objectMode&&!!s.encoding&&s.encoding!=="buffer",oe=class extends As.EventEmitter{[q]=!1;[Si]=!1;[it]=[];[H]=[];[J];[Ot];[jt];[Ie];[qt]=!1;[ne]=!1;[Es]=!1;[xs]=!1;[bi]=null;[V]=0;[L]=!1;[vi];[Cs]=!1;[be]=0;[dt]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");bh(e)?(this[J]=!0,this[Ot]=null):Sh(e)?(this[Ot]=e.encoding,this[J]=!1):(this[J]=!1,this[Ot]=null),this[jt]=!!e.async,this[Ie]=this[Ot]?new yn.StringDecoder(this[Ot]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[H]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[it]});let{signal:i}=e;i&&(this[vi]=i,i.aborted?this[lr]():i.addEventListener("abort",()=>this[lr]()))}get bufferLength(){return this[V]}get encoding(){return this[Ot]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[J]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[jt]}set async(t){this[jt]=this[jt]||!!t}[lr](){var t,e;this[Cs]=!0,this.emit("abort",(t=this[vi])==null?void 0:t.reason),this.destroy((e=this[vi])==null?void 0:e.reason)}get aborted(){return this[Cs]}set aborted(t){}write(t,e,i){var o;if(this[Cs])return!1;if(this[qt])throw new Error("write after end");if(this[L])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(i=e,e="utf8"),e||(e="utf8");let r=this[jt]?Ei:mh;if(!this[J]&&!Buffer.isBuffer(t)){if(yh(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(wh(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[J]?(this[q]&&this[V]!==0&&this[_s](!0),this[q]?this.emit("data",t):this[nr](t),this[V]!==0&&this.emit("readable"),i&&r(i),this[q]):t.length?(typeof t=="string"&&!(e===this[Ot]&&!((o=this[Ie])!=null&&o.lastNeed))&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Ot]&&(t=this[Ie].write(t)),this[q]&&this[V]!==0&&this[_s](!0),this[q]?this.emit("data",t):this[nr](t),this[V]!==0&&this.emit("readable"),i&&r(i),this[q]):(this[V]!==0&&this.emit("readable"),i&&r(i),this[q])}read(t){if(this[L])return null;if(this[dt]=!1,this[V]===0||t===0||t&&t>this[V])return this[Ht](),null;this[J]&&(t=null),this[H].length>1&&!this[J]&&(this[H]=[this[Ot]?this[H].join(""):Buffer.concat(this[H],this[V])]);let e=this[mn](t||null,this[H][0]);return this[Ht](),e}[mn](t,e){if(this[J])this[Os]();else{let i=e;t===i.length||t===null?this[Os]():typeof i=="string"?(this[H][0]=i.slice(t),e=i.slice(0,t),this[V]-=t):(this[H][0]=i.subarray(t),e=i.subarray(0,t),this[V]-=t)}return this.emit("data",e),!this[H].length&&!this[qt]&&this.emit("drain"),e}end(t,e,i){return typeof t=="function"&&(i=t,t=void 0),typeof e=="function"&&(i=e,e="utf8"),t!==void 0&&this.write(t,e),i&&this.once("end",i),this[qt]=!0,this.writable=!1,(this[q]||!this[Si])&&this[Ht](),this}[$e](){this[L]||(!this[be]&&!this[it].length&&(this[dt]=!0),this[Si]=!1,this[q]=!0,this.emit("resume"),this[H].length?this[_s]():this[qt]?this[Ht]():this.emit("drain"))}resume(){return this[$e]()}pause(){this[q]=!1,this[Si]=!0,this[dt]=!1}get destroyed(){return this[L]}get flowing(){return this[q]}get paused(){return this[Si]}[nr](t){this[J]?this[V]+=1:this[V]+=t.length,this[H].push(t)}[Os](){return this[J]?this[V]-=1:this[V]-=this[H][0].length,this[H].shift()}[_s](t=!1){do;while(this[gn](this[Os]())&&this[H].length);!t&&!this[H].length&&!this[qt]&&this.emit("drain")}[gn](t){return this.emit("data",t),this[q]}pipe(t,e){if(this[L])return t;this[dt]=!1;let i=this[ne];return e=e||{},t===pn.stdout||t===pn.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,i?e.end&&t.end():(this[it].push(e.proxyErrors?new cr(this,t,e):new Ts(this,t,e)),this[jt]?Ei(()=>this[$e]()):this[$e]()),t}unpipe(t){let e=this[it].find(i=>i.dest===t);e&&(this[it].length===1?(this[q]&&this[be]===0&&(this[q]=!1),this[it]=[]):this[it].splice(this[it].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let i=super.on(t,e);if(t==="data")this[dt]=!1,this[be]++,!this[it].length&&!this[q]&&this[$e]();else if(t==="readable"&&this[V]!==0)super.emit("readable");else if(gh(t)&&this[ne])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[bi]){let r=e;this[jt]?Ei(()=>r.call(this,this[bi])):r.call(this,this[bi])}return i}removeListener(t,e){return this.off(t,e)}off(t,e){let i=super.off(t,e);return t==="data"&&(this[be]=this.listeners("data").length,this[be]===0&&!this[dt]&&!this[it].length&&(this[q]=!1)),i}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[be]=0,!this[dt]&&!this[it].length&&(this[q]=!1)),e}get emittedEnd(){return this[ne]}[Ht](){!this[Es]&&!this[ne]&&!this[L]&&this[H].length===0&&this[qt]&&(this[Es]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[xs]&&this.emit("close"),this[Es]=!1)}emit(t,...e){let i=e[0];if(t!=="error"&&t!=="close"&&t!==L&&this[L])return!1;if(t==="data")return!this[J]&&!i?!1:this[jt]?(Ei(()=>this[hr](i)),!0):this[hr](i);if(t==="end")return this[wn]();if(t==="close"){if(this[xs]=!0,!this[ne]&&!this[L])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(t==="error"){this[bi]=i,super.emit(or,i);let o=!this[vi]||this.listeners("error").length?super.emit("error",i):!1;return this[Ht](),o}else if(t==="resume"){let o=super.emit("resume");return this[Ht](),o}else if(t==="finish"||t==="prefinish"){let o=super.emit(t);return this.removeAllListeners(t),o}let r=super.emit(t,...e);return this[Ht](),r}[hr](t){for(let i of this[it])i.dest.write(t)===!1&&this.pause();let e=this[dt]?!1:super.emit("data",t);return this[Ht](),e}[wn](){return this[ne]?!1:(this[ne]=!0,this.readable=!1,this[jt]?(Ei(()=>this[ar]()),!0):this[ar]())}[ar](){if(this[Ie]){let e=this[Ie].end();if(e){for(let i of this[it])i.dest.write(e);this[dt]||super.emit("data",e)}}for(let e of this[it])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[J]||(t.dataLength=0);let e=this.promise();return this.on("data",i=>{t.push(i),this[J]||(t.dataLength+=i.length)}),await e,t}async concat(){if(this[J])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[Ot]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(L,()=>e(new Error("stream destroyed"))),this.on("error",i=>e(i)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[dt]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[qt])return e();let o,h,a=d=>{this.off("data",l),this.off("end",c),this.off(L,f),e(),h(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(L,f),this.pause(),o({value:d,done:!!this[qt]})},c=()=>{this.off("error",a),this.off("data",l),this.off(L,f),e(),o({done:!0,value:void 0})},f=()=>a(new Error("stream destroyed"));return new Promise((d,g)=>{h=g,o=d,this.once(L,f),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[dt]=!1;let t=!1,e=()=>(this.pause(),this.off(or,e),this.off(L,e),this.off("end",e),t=!0,{done:!0,value:void 0}),i=()=>{if(t)return e();let r=this.read();return r===null?e():{done:!1,value:r}};return this.once("end",e),this.once(or,e),this.once(L,e),{next:i,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[L])return t?this.emit("error",t):this.emit(L),this;this[L]=!0,this[dt]=!0,this[H].length=0,this[V]=0;let e=this;return typeof e.close=="function"&&!this[xs]&&e.close(),t?this.emit("error",t):this.emit(L),this}static get isStream(){return uh}};var Eh=Wt.realpathSync.native,_i={lstatSync:Wt.lstatSync,readdir:Wt.readdir,readdirSync:Wt.readdirSync,readlinkSync:Wt.readlinkSync,realpathSync:Eh,promises:{lstat:ae.lstat,readdir:ae.readdir,readlink:ae.readlink,realpath:ae.realpath}},_n=s=>!s||s===_i||s===vh?_i:{..._i,...s,promises:{..._i.promises,...s.promises||{}}},On=/^\\\\\?\\([a-z]:)\\?$/i,xh=s=>s.replace(/\//g,"\\").replace(On,"$1\\"),_h=/[\\\/]/,wt=0,Cn=1,Tn=2,Mt=4,An=6,Rn=8,Se=10,Dn=12,gt=15,xi=~gt,ur=16,bn=32,Oi=64,Ct=128,Rs=256,ks=512,Sn=Oi|Ct|ks,Oh=1023,dr=s=>s.isFile()?Rn:s.isDirectory()?Mt:s.isSymbolicLink()?Se:s.isCharacterDevice()?Tn:s.isBlockDevice()?An:s.isSocket()?Dn:s.isFIFO()?Cn:wt,vn=new Map,Ci=s=>{let t=vn.get(s);if(t)return t;let e=s.normalize("NFKD");return vn.set(s,e),e},En=new Map,Ds=s=>{let t=En.get(s);if(t)return t;let e=Ci(s.toLowerCase());return En.set(s,e),e},Ms=class extends di{constructor(){super({max:256})}},pr=class extends di{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},kn=Symbol("PathScurry setAsCwd"),st,Di,ki,Fi,Ni,ji,Mi,Li,Pi,Wi,Ii,$i,Bi,zi,Ui,Gi,qi,Hi,Vi,he,ve,Lt,Vt,Kt,Yt,_,Ee,Qt,Pt,Ki,mr,Be,Fs,xe,Ti,Yi,gr,Qi,wr,_e,Ai,ze,Ns,Xi,yr,Ji,br,Ue,js,Ps,Fn,Ws,Nn,Is,jn,Zi,Sr,Ge,qe,$s,Mn,Oe,Z=class{constructor(t,e=wt,i,r,o,h,a){p(this,Ki);p(this,Be);p(this,xe);p(this,Yi);p(this,Qi);p(this,_e);p(this,ze);p(this,Xi);p(this,Ji);p(this,Ue);p(this,Ps);p(this,Ws);p(this,Is);p(this,Zi);p(this,$s);T(this,"name");T(this,"root");T(this,"roots");T(this,"parent");T(this,"nocase");p(this,st,void 0);p(this,Di,void 0);p(this,ki,void 0);p(this,Fi,void 0);p(this,Ni,void 0);p(this,ji,void 0);p(this,Mi,void 0);p(this,Li,void 0);p(this,Pi,void 0);p(this,Wi,void 0);p(this,Ii,void 0);p(this,$i,void 0);p(this,Bi,void 0);p(this,zi,void 0);p(this,Ui,void 0);p(this,Gi,void 0);p(this,qi,void 0);p(this,Hi,void 0);p(this,Vi,void 0);p(this,he,void 0);p(this,ve,void 0);p(this,Lt,void 0);p(this,Vt,void 0);p(this,Kt,void 0);p(this,Yt,void 0);p(this,_,void 0);p(this,Ee,void 0);p(this,Qt,void 0);p(this,Pt,void 0);p(this,Ge,[]);p(this,qe,!1);p(this,Oe,void 0);this.name=t,u(this,he,o?Ds(t):Ci(t)),u(this,_,e&Oh),this.nocase=o,this.roots=r,this.root=i||this,u(this,Ee,h),u(this,Lt,a.fullpath),u(this,Kt,a.relative),u(this,Yt,a.relativePosix),this.parent=a.parent,this.parent?u(this,st,n(this.parent,st)):u(this,st,_n(a.fs))}get dev(){return n(this,Di)}get mode(){return n(this,ki)}get nlink(){return n(this,Fi)}get uid(){return n(this,Ni)}get gid(){return n(this,ji)}get rdev(){return n(this,Mi)}get blksize(){return n(this,Li)}get ino(){return n(this,Pi)}get size(){return n(this,Wi)}get blocks(){return n(this,Ii)}get atimeMs(){return n(this,$i)}get mtimeMs(){return n(this,Bi)}get ctimeMs(){return n(this,zi)}get birthtimeMs(){return n(this,Ui)}get atime(){return n(this,Gi)}get mtime(){return n(this,qi)}get ctime(){return n(this,Hi)}get birthtime(){return n(this,Vi)}get path(){return(this.parent||this).fullpath()}depth(){return n(this,ve)!==void 0?n(this,ve):this.parent?u(this,ve,this.parent.depth()+1):u(this,ve,0)}childrenCache(){return n(this,Ee)}resolve(t){var h;if(!t)return this;let e=this.getRootString(t),r=t.substring(e.length).split(this.splitSep);return e?w(h=this.getRoot(e),Ki,mr).call(h,r):w(this,Ki,mr).call(this,r)}children(){let t=n(this,Ee).get(this);if(t)return t;let e=Object.assign([],{provisional:0});return n(this,Ee).set(this,e),u(this,_,n(this,_)&~ur),e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let i=this.children(),r=this.nocase?Ds(t):Ci(t);for(let l of i)if(n(l,he)===r)return l;let o=this.parent?this.sep:"",h=n(this,Lt)?n(this,Lt)+o+t:void 0,a=this.newChild(t,wt,{...e,parent:this,fullpath:h});return this.canReaddir()||u(a,_,n(a,_)|Ct),i.push(a),a}relative(){if(n(this,Kt)!==void 0)return n(this,Kt);let t=this.name,e=this.parent;if(!e)return u(this,Kt,this.name);let i=e.relative();return i+(!i||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(n(this,Yt)!==void 0)return n(this,Yt);let t=this.name,e=this.parent;if(!e)return u(this,Yt,this.fullpathPosix());let i=e.relativePosix();return i+(!i||!e.parent?"":"/")+t}fullpath(){if(n(this,Lt)!==void 0)return n(this,Lt);let t=this.name,e=this.parent;if(!e)return u(this,Lt,this.name);let r=e.fullpath()+(e.parent?this.sep:"")+t;return u(this,Lt,r)}fullpathPosix(){if(n(this,Vt)!==void 0)return n(this,Vt);if(this.sep==="/")return u(this,Vt,this.fullpath());if(!this.parent){let r=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(r)?u(this,Vt,`//?/${r}`):u(this,Vt,r)}let t=this.parent,e=t.fullpathPosix(),i=e+(!e||!t.parent?"":"/")+this.name;return u(this,Vt,i)}isUnknown(){return(n(this,_)&gt)===wt}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(n(this,_)&gt)===Rn}isDirectory(){return(n(this,_)&gt)===Mt}isCharacterDevice(){return(n(this,_)&gt)===Tn}isBlockDevice(){return(n(this,_)&gt)===An}isFIFO(){return(n(this,_)&gt)===Cn}isSocket(){return(n(this,_)&gt)===Dn}isSymbolicLink(){return(n(this,_)&Se)===Se}lstatCached(){return n(this,_)&bn?this:void 0}readlinkCached(){return n(this,Qt)}realpathCached(){return n(this,Pt)}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(n(this,Qt))return!0;if(!this.parent)return!1;let t=n(this,_)&gt;return!(t!==wt&&t!==Se||n(this,_)&Rs||n(this,_)&Ct)}calledReaddir(){return!!(n(this,_)&ur)}isENOENT(){return!!(n(this,_)&Ct)}isNamed(t){return this.nocase?n(this,he)===Ds(t):n(this,he)===Ci(t)}async readlink(){let t=n(this,Qt);if(t)return t;if(this.canReadlink()&&this.parent)try{let e=await n(this,st).promises.readlink(this.fullpath()),i=this.parent.resolve(e);if(i)return u(this,Qt,i)}catch(e){w(this,Ji,br).call(this,e.code);return}}readlinkSync(){let t=n(this,Qt);if(t)return t;if(this.canReadlink()&&this.parent)try{let e=n(this,st).readlinkSync(this.fullpath()),i=this.parent.resolve(e);if(i)return u(this,Qt,i)}catch(e){w(this,Ji,br).call(this,e.code);return}}async lstat(){if(!(n(this,_)&Ct))try{return w(this,Zi,Sr).call(this,await n(this,st).promises.lstat(this.fullpath())),this}catch(t){w(this,Xi,yr).call(this,t.code)}}lstatSync(){if(!(n(this,_)&Ct))try{return w(this,Zi,Sr).call(this,n(this,st).lstatSync(this.fullpath())),this}catch(t){w(this,Xi,yr).call(this,t.code)}}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let i=this.children();if(this.calledReaddir()){let o=i.slice(0,i.provisional);e?t(null,o):queueMicrotask(()=>t(null,o));return}if(n(this,Ge).push(t),n(this,qe))return;u(this,qe,!0);let r=this.fullpath();n(this,st).readdir(r,{withFileTypes:!0},(o,h)=>{if(o)w(this,ze,Ns).call(this,o.code),i.provisional=0;else{for(let a of h)w(this,Ue,js).call(this,a,i);w(this,Be,Fs).call(this,i)}w(this,$s,Mn).call(this,i.slice(0,i.provisional))})}async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(n(this,Oe))await n(this,Oe);else{let i=()=>{};u(this,Oe,new Promise(r=>i=r));try{for(let r of await n(this,st).promises.readdir(e,{withFileTypes:!0}))w(this,Ue,js).call(this,r,t);w(this,Be,Fs).call(this,t)}catch(r){w(this,ze,Ns).call(this,r.code),t.provisional=0}u(this,Oe,void 0),i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let i of n(this,st).readdirSync(e,{withFileTypes:!0}))w(this,Ue,js).call(this,i,t);w(this,Be,Fs).call(this,t)}catch(i){w(this,ze,Ns).call(this,i.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(n(this,_)&Sn)return!1;let t=gt&n(this,_);return t===wt||t===Mt||t===Se}shouldWalk(t,e){return(n(this,_)&Mt)===Mt&&!(n(this,_)&Sn)&&!t.has(this)&&(!e||e(this))}async realpath(){if(n(this,Pt))return n(this,Pt);if(!((ks|Rs|Ct)&n(this,_)))try{let t=await n(this,st).promises.realpath(this.fullpath());return u(this,Pt,this.resolve(t))}catch{w(this,Qi,wr).call(this)}}realpathSync(){if(n(this,Pt))return n(this,Pt);if(!((ks|Rs|Ct)&n(this,_)))try{let t=n(this,st).realpathSync(this.fullpath());return u(this,Pt,this.resolve(t))}catch{w(this,Qi,wr).call(this)}}[kn](t){if(t===this)return;let e=new Set([]),i=[],r=this;for(;r&&r.parent;)e.add(r),u(r,Kt,i.join(this.sep)),u(r,Yt,i.join("/")),r=r.parent,i.push("..");for(r=t;r&&r.parent&&!e.has(r);)u(r,Kt,void 0),u(r,Yt,void 0),r=r.parent}};st=new WeakMap,Di=new WeakMap,ki=new WeakMap,Fi=new WeakMap,Ni=new WeakMap,ji=new WeakMap,Mi=new WeakMap,Li=new WeakMap,Pi=new WeakMap,Wi=new WeakMap,Ii=new WeakMap,$i=new WeakMap,Bi=new WeakMap,zi=new WeakMap,Ui=new WeakMap,Gi=new WeakMap,qi=new WeakMap,Hi=new WeakMap,Vi=new WeakMap,he=new WeakMap,ve=new WeakMap,Lt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,_=new WeakMap,Ee=new WeakMap,Qt=new WeakMap,Pt=new WeakMap,Ki=new WeakSet,mr=function(t){let e=this;for(let i of t)e=e.child(i);return e},Be=new WeakSet,Fs=function(t){var e;u(this,_,n(this,_)|ur);for(let i=t.provisional;i<t.length;i++)w(e=t[i],xe,Ti).call(e)},xe=new WeakSet,Ti=function(){n(this,_)&Ct||(u(this,_,(n(this,_)|Ct)&xi),w(this,Yi,gr).call(this))},Yi=new WeakSet,gr=function(){var e;let t=this.children();t.provisional=0;for(let i of t)w(e=i,xe,Ti).call(e)},Qi=new WeakSet,wr=function(){u(this,_,n(this,_)|ks),w(this,_e,Ai).call(this)},_e=new WeakSet,Ai=function(){if(n(this,_)&Oi)return;let t=n(this,_);(t&gt)===Mt&&(t&=xi),u(this,_,t|Oi),w(this,Yi,gr).call(this)},ze=new WeakSet,Ns=function(t=""){t==="ENOTDIR"||t==="EPERM"?w(this,_e,Ai).call(this):t==="ENOENT"?w(this,xe,Ti).call(this):this.children().provisional=0},Xi=new WeakSet,yr=function(t=""){var e;if(t==="ENOTDIR"){let i=this.parent;w(e=i,_e,Ai).call(e)}else t==="ENOENT"&&w(this,xe,Ti).call(this)},Ji=new WeakSet,br=function(t=""){var i;let e=n(this,_);e|=Rs,t==="ENOENT"&&(e|=Ct),(t==="EINVAL"||t==="UNKNOWN")&&(e&=xi),u(this,_,e),t==="ENOTDIR"&&this.parent&&w(i=this.parent,_e,Ai).call(i)},Ue=new WeakSet,js=function(t,e){return w(this,Ws,Nn).call(this,t,e)||w(this,Ps,Fn).call(this,t,e)},Ps=new WeakSet,Fn=function(t,e){let i=dr(t),r=this.newChild(t.name,i,{parent:this}),o=n(r,_)&gt;return o!==Mt&&o!==Se&&o!==wt&&u(r,_,n(r,_)|Oi),e.unshift(r),e.provisional++,r},Ws=new WeakSet,Nn=function(t,e){for(let i=e.provisional;i<e.length;i++){let r=e[i];if((this.nocase?Ds(t.name):Ci(t.name))===n(r,he))return w(this,Is,jn).call(this,t,r,i,e)}},Is=new WeakSet,jn=function(t,e,i,r){let o=e.name;return u(e,_,n(e,_)&xi|dr(t)),o!==t.name&&(e.name=t.name),i!==r.provisional&&(i===r.length-1?r.pop():r.splice(i,1),r.unshift(e)),r.provisional++,e},Zi=new WeakSet,Sr=function(t){let{atime:e,atimeMs:i,birthtime:r,birthtimeMs:o,blksize:h,blocks:a,ctime:l,ctimeMs:c,dev:f,gid:d,ino:g,mode:y,mtime:E,mtimeMs:m,nlink:S,rdev:b,size:x,uid:C}=t;u(this,Gi,e),u(this,$i,i),u(this,Vi,r),u(this,Ui,o),u(this,Li,h),u(this,Ii,a),u(this,Hi,l),u(this,zi,c),u(this,Di,f),u(this,ji,d),u(this,Pi,g),u(this,ki,y),u(this,qi,E),u(this,Bi,m),u(this,Fi,S),u(this,Mi,b),u(this,Wi,x),u(this,Ni,C);let A=dr(t);u(this,_,n(this,_)&xi|A|bn),A!==wt&&A!==Mt&&A!==Se&&u(this,_,n(this,_)|Oi)},Ge=new WeakMap,qe=new WeakMap,$s=new WeakSet,Mn=function(t){u(this,qe,!1);let e=n(this,Ge).slice();n(this,Ge).length=0,e.forEach(i=>i(null,t))},Oe=new WeakMap;var Ye=class extends Z{sep="\\";splitSep=_h;constructor(t,e=wt,i,r,o,h,a){super(t,e,i,r,o,h,a)}newChild(t,e=wt,i={}){return new Ye(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return Ke.win32.parse(t).root}getRoot(t){if(t=xh(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new Xe(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(On,"$1\\"),t===e}},Qe=class extends Z{splitSep="/";sep="/";constructor(t,e=wt,i,r,o,h,a){super(t,e,i,r,o,h,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=wt,i={}){return new Qe(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}},He,Ve,ts,es,Ls=class{constructor(t=process.cwd(),e,i,{nocase:r,childrenCacheSize:o=16*1024,fs:h=_i}={}){T(this,"root");T(this,"rootPath");T(this,"roots");T(this,"cwd");p(this,He,void 0);p(this,Ve,void 0);p(this,ts,void 0);T(this,"nocase");p(this,es,void 0);u(this,es,_n(h)),(t instanceof URL||t.startsWith("file://"))&&(t=(0,xn.fileURLToPath)(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),u(this,He,new Ms),u(this,Ve,new Ms),u(this,ts,new pr(o));let l=a.substring(this.rootPath.length).split(i);if(l.length===1&&!l[0]&&l.pop(),r===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=r,this.root=this.newRoot(n(this,es)),this.roots[this.rootPath]=this.root;let c=this.root,f=l.length-1,d=e.sep,g=this.rootPath,y=!1;for(let E of l){let m=f--;c=c.child(E,{relative:new Array(m).fill("..").join(d),relativePosix:new Array(m).fill("..").join("/"),fullpath:g+=(y?"":d)+E}),y=!0}this.cwd=c}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return n(this,ts)}resolve(...t){let e="";for(let o=t.length-1;o>=0;o--){let h=t[o];if(!(!h||h===".")&&(e=e?`${h}/${e}`:h,this.isAbsolute(h)))break}let i=n(this,He).get(e);if(i!==void 0)return i;let r=this.cwd.resolve(e).fullpath();return n(this,He).set(e,r),r}resolvePosix(...t){let e="";for(let o=t.length-1;o>=0;o--){let h=t[o];if(!(!h||h===".")&&(e=e?`${h}/${e}`:h,this.isAbsolute(h)))break}let i=n(this,Ve).get(e);if(i!==void 0)return i;let r=this.cwd.resolve(e).fullpathPosix();return n(this,Ve).set(e,r),r}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i}=e;if(t.canReaddir()){let r=await t.readdir();return i?r:r.map(o=>o.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map(r=>r.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t.withFileTypes,t=this.cwd);let i=await t.readlink();return e?i:i==null?void 0:i.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t.withFileTypes,t=this.cwd);let i=t.readlinkSync();return e?i:i==null?void 0:i.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t.withFileTypes,t=this.cwd);let i=await t.realpath();return e?i:i==null?void 0:i.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t.withFileTypes,t=this.cwd);let i=t.realpathSync();return e?i:i==null?void 0:i.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:o,walkFilter:h}=e,a=[];(!o||o(t))&&a.push(i?t:t.fullpath());let l=new Set,c=(d,g)=>{l.add(d),d.readdirCB((y,E)=>{if(y)return g(y);let m=E.length;if(!m)return g();let S=()=>{--m===0&&g()};for(let b of E)(!o||o(b))&&a.push(i?b:b.fullpath()),r&&b.isSymbolicLink()?b.realpath().then(x=>x!=null&&x.isUnknown()?x.lstat():x).then(x=>x!=null&&x.shouldWalk(l,h)?c(x,S):S()):b.shouldWalk(l,h)?c(b,S):S()},!0)},f=t;return new Promise((d,g)=>{c(f,y=>{if(y)return g(y);d(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:o,walkFilter:h}=e,a=[];(!o||o(t))&&a.push(i?t:t.fullpath());let l=new Set([t]);for(let c of l){let f=c.readdirSync();for(let d of f){(!o||o(d))&&a.push(i?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(r&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,h)&&l.add(g)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:o,walkFilter:h}=e;(!o||o(t))&&(yield i?t:t.fullpath());let a=new Set([t]);for(let l of a){let c=l.readdirSync();for(let f of c){(!o||o(f))&&(yield i?f:f.fullpath());let d=f;if(f.isSymbolicLink()){if(!(r&&(d=f.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,h)&&a.add(d)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:o,walkFilter:h}=e,a=new oe({objectMode:!0});(!o||o(t))&&a.write(i?t:t.fullpath());let l=new Set,c=[t],f=0,d=()=>{let g=!1;for(;!g;){let y=c.shift();if(!y){f===0&&a.end();return}f++,l.add(y);let E=(S,b,x=!1)=>{if(S)return a.emit("error",S);if(r&&!x){let C=[];for(let A of b)A.isSymbolicLink()&&C.push(A.realpath().then(D=>D!=null&&D.isUnknown()?D.lstat():D));if(C.length){Promise.all(C).then(()=>E(null,b,!0));return}}for(let C of b)C&&(!o||o(C))&&(a.write(i?C:C.fullpath())||(g=!0));f--;for(let C of b){let A=C.realpathCached()||C;A.shouldWalk(l,h)&&c.push(A)}g&&!a.flowing?a.once("drain",d):m||d()},m=!0;y.readdirCB(E,!0),m=!1}};return d(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof Z||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:o,walkFilter:h}=e,a=new oe({objectMode:!0}),l=new Set;(!o||o(t))&&a.write(i?t:t.fullpath());let c=[t],f=0,d=()=>{let g=!1;for(;!g;){let y=c.shift();if(!y){f===0&&a.end();return}f++,l.add(y);let E=y.readdirSync();for(let m of E)(!o||o(m))&&(a.write(i?m:m.fullpath())||(g=!0));f--;for(let m of E){let S=m;if(m.isSymbolicLink()){if(!(r&&(S=m.realpathSync())))continue;S.isUnknown()&&S.lstatSync()}S.shouldWalk(l,h)&&c.push(S)}}g&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[kn](e)}};He=new WeakMap,Ve=new WeakMap,ts=new WeakMap,es=new WeakMap;var Xe=class extends Ls{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,Ke.win32,"\\",{...e,nocase:i}),this.nocase=i;for(let r=this.cwd;r;r=r.parent)r.nocase=this.nocase}parseRootPath(t){return Ke.win32.parse(t).root.toUpperCase()}newRoot(t){return new Ye(this.rootPath,Mt,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},Je=class extends Ls{sep="/";constructor(t=process.cwd(),e={}){let{nocase:i=!1}=e;super(t,Ke.posix,"/",{...e,nocase:i}),this.nocase=i}parseRootPath(t){return"/"}newRoot(t){return new Qe(this.rootPath,Mt,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},Ri=class extends Je{constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,{...e,nocase:i})}},il=process.platform==="win32"?Ye:Qe,Ln=process.platform==="win32"?Xe:process.platform==="darwin"?Ri:Je;var Pn=require("url");var Ch=s=>s.length>=1,Th=s=>s.length>=1,z,pt,K,Ce,Tt,is,le,ce,fe,Ze,vr=class{constructor(t,e,i,r){p(this,z,void 0);p(this,pt,void 0);p(this,K,void 0);T(this,"length");p(this,Ce,void 0);p(this,Tt,void 0);p(this,is,void 0);p(this,le,void 0);p(this,ce,void 0);p(this,fe,void 0);p(this,Ze,!0);if(!Ch(t))throw new TypeError("empty pattern list");if(!Th(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(u(this,z,t),u(this,pt,e),u(this,K,i),u(this,Ce,r),n(this,K)===0){if(this.isUNC()){let[o,h,a,l,...c]=n(this,z),[f,d,g,y,...E]=n(this,pt);c[0]===""&&(c.shift(),E.shift());let m=[o,h,a,l,""].join("/"),S=[f,d,g,y,""].join("/");u(this,z,[m,...c]),u(this,pt,[S,...E]),this.length=n(this,z).length}else if(this.isDrive()||this.isAbsolute()){let[o,...h]=n(this,z),[a,...l]=n(this,pt);h[0]===""&&(h.shift(),l.shift());let c=o+"/",f=a+"/";u(this,z,[c,...h]),u(this,pt,[f,...l]),this.length=n(this,z).length}}}pattern(){return n(this,z)[n(this,K)]}isString(){return typeof n(this,z)[n(this,K)]=="string"}isGlobstar(){return n(this,z)[n(this,K)]===Y}isRegExp(){return n(this,z)[n(this,K)]instanceof RegExp}globString(){return u(this,is,n(this,is)||(n(this,K)===0?this.isAbsolute()?n(this,pt)[0]+n(this,pt).slice(1).join("/"):n(this,pt).join("/"):n(this,pt).slice(n(this,K)).join("/")))}hasMore(){return this.length>n(this,K)+1}rest(){return n(this,Tt)!==void 0?n(this,Tt):this.hasMore()?(u(this,Tt,new vr(n(this,z),n(this,pt),n(this,K)+1,n(this,Ce))),u(n(this,Tt),fe,n(this,fe)),u(n(this,Tt),ce,n(this,ce)),u(n(this,Tt),le,n(this,le)),n(this,Tt)):u(this,Tt,null)}isUNC(){let t=n(this,z);return n(this,ce)!==void 0?n(this,ce):u(this,ce,n(this,Ce)==="win32"&&n(this,K)===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3])}isDrive(){let t=n(this,z);return n(this,le)!==void 0?n(this,le):u(this,le,n(this,Ce)==="win32"&&n(this,K)===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]))}isAbsolute(){let t=n(this,z);return n(this,fe)!==void 0?n(this,fe):u(this,fe,t[0]===""&&t.length>1||this.isDrive()||this.isUNC())}root(){let t=n(this,z)[0];return typeof t=="string"&&this.isAbsolute()&&n(this,K)===0?t:""}checkFollowGlobstar(){return!(n(this,K)===0||!this.isGlobstar()||!n(this,Ze))}markFollowGlobstar(){return n(this,K)===0||!this.isGlobstar()||!n(this,Ze)?!1:(u(this,Ze,!1),!0)}},ti=vr;z=new WeakMap,pt=new WeakMap,K=new WeakMap,Ce=new WeakMap,Tt=new WeakMap,is=new WeakMap,le=new WeakMap,ce=new WeakMap,fe=new WeakMap,Ze=new WeakMap;var Ah=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ss=class{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:i,noext:r,noglobstar:o,platform:h=Ah}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let a={dot:!0,nobrace:e,nocase:i,noext:r,noglobstar:o,optimizationLevel:2,platform:h,nocomment:!0,nonegate:!0};for(let l of t){let c=new lt(l,a);for(let f=0;f<c.set.length;f++){let d=c.set[f],g=c.globParts[f],y=new ti(d,g,0,h),E=new lt(y.globString(),a),m=g[g.length-1]==="**",S=y.isAbsolute();S?this.absolute.push(E):this.relative.push(E),m&&(S?this.absoluteChildren.push(E):this.relativeChildren.push(E))}}}ignored(t){let e=t.fullpath(),i=`${e}/`,r=t.relative()||".",o=`${r}/`;for(let h of this.relative)if(h.match(r)||h.match(o))return!0;for(let h of this.absolute)if(h.match(e)||h.match(i))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",i=(t.relative()||".")+"/";for(let r of this.relativeChildren)if(r.match(i))return!0;for(let r of this.absoluteChildren)r.match(e);return!1}};var rs=class{store;constructor(t=new Map){this.store=t}copy(){return new rs(new Map(this.store))}hasWalked(t,e){var i;return(i=this.store.get(t.fullpath()))==null?void 0:i.has(e.globString())}storeWalked(t,e){let i=t.fullpath(),r=this.store.get(i);r?r.add(e.globString()):this.store.set(i,new Set([e.globString()]))}},Er=class{store=new Map;add(t,e,i){let r=(e?2:0)|(i?1:0),o=this.store.get(t);this.store.set(t,o===void 0?r:r&o)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},xr=class{store=new Map;add(t,e){if(!t.canReaddir())return;let i=this.store.get(t);i?i.find(r=>r.globString()===e.globString())||i.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},Te=class{hasWalkedCache;matches=new Er;subwalks=new xr;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new rs}processPatterns(t,e){this.patterns=e;let i=e.map(r=>[t,r]);for(let[r,o]of i){this.hasWalkedCache.storeWalked(r,o);let h=o.root(),a=o.isAbsolute()&&this.opts.absolute!==!1;if(h){r=r.resolve(h==="/"&&this.opts.root!==void 0?this.opts.root:h);let d=o.rest();if(d)o=d;else{this.matches.add(r,!0,!1);continue}}if(r.isENOENT())continue;let l,c,f=!1;for(;typeof(l=o.pattern())=="string"&&(c=o.rest());){let d=r.resolve(l);if(d.isUnknown()&&l!=="..")break;r=d,o=c,f=!0}if(l=o.pattern(),c=o.rest(),f){if(this.hasWalkedCache.hasWalked(r,o))continue;this.hasWalkedCache.storeWalked(r,o)}if(typeof l=="string"){if(c)this.subwalks.add(r,o);else{let d=l===".."||l===""||l===".";this.matches.add(r.resolve(l),a,d)}continue}else if(l===Y){(!r.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(r,o);let d=c==null?void 0:c.pattern(),g=c==null?void 0:c.rest();if(!c||(d===""||d===".")&&!g)this.matches.add(r,a,d===""||d===".");else if(d===".."){let y=r.parent||r;g?this.hasWalkedCache.hasWalked(y,g)||this.subwalks.add(y,g):this.matches.add(y,a,!0)}}else l instanceof RegExp&&this.subwalks.add(r,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Te(this.opts,this.hasWalkedCache)}filterEntries(t,e){let i=this.subwalks.get(t),r=this.child();for(let o of e)for(let h of i){let a=h.isAbsolute(),l=h.pattern(),c=h.rest();l===Y?r.testGlobstar(o,h,c,a):l instanceof RegExp?r.testRegExp(o,l,c,a):r.testString(o,l,c,a)}return r}testGlobstar(t,e,i,r){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,r,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(i&&e.checkFollowGlobstar()?this.subwalks.add(t,i):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),i){let o=i.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(t,o,i.rest(),r);else if(o===".."){let h=t.parent||t;this.subwalks.add(h,i)}else o instanceof RegExp&&this.testRegExp(t,o,i.rest(),r)}}testRegExp(t,e,i,r){e.test(t.name)&&(i?this.subwalks.add(t,i):this.matches.add(t,r,!1))}testString(t,e,i,r){t.isNamed(e)&&(i?this.subwalks.add(t,i):this.matches.add(t,r,!1))}};var Rh=(s,t)=>typeof s=="string"?new ss([s],t):Array.isArray(s)?new ss(s,t):s,ei,ii,Re,Xt,Ae,hs,_r,Bs=class{constructor(t,e,i){p(this,Xt);p(this,hs);T(this,"path");T(this,"patterns");T(this,"opts");T(this,"seen",new Set);T(this,"paused",!1);T(this,"aborted",!1);p(this,ei,[]);p(this,ii,void 0);p(this,Re,void 0);T(this,"signal");T(this,"maxDepth");this.patterns=t,this.path=e,this.opts=i,u(this,Re,!i.posix&&i.platform==="win32"?"\\":"/"),i.ignore&&u(this,ii,Rh(i.ignore,i)),this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{n(this,ei).length=0}))}pause(){this.paused=!0}resume(){var e;if((e=this.signal)!=null&&e.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=n(this,ei).shift());)t()}onResume(t){var e;(e=this.signal)!=null&&e.aborted||(this.paused?n(this,ei).push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||await t.realpath(),!i)return;t=i}let r=t.isUnknown()||this.opts.stat;return this.matchCheckTest(r?await t.lstat():t,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&!w(this,Xt,Ae).call(this,t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||t.realpathSync(),!i)return;t=i}let r=t.isUnknown()||this.opts.stat;return this.matchCheckTest(r?t.lstatSync():t,e)}matchFinish(t,e){if(w(this,Xt,Ae).call(this,t))return;let i=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let r=this.opts.mark&&t.isDirectory()?n(this,Re):"";if(this.opts.withFileTypes)this.matchEmit(t);else if(i){let o=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(o+r)}else{let o=this.opts.posix?t.relativePosix():t.relative(),h=this.opts.dotRelative&&!o.startsWith(".."+n(this,Re))?"."+n(this,Re):"";this.matchEmit(o?h+o+r:"."+r)}}async match(t,e,i){let r=await this.matchCheck(t,i);r&&this.matchFinish(r,e)}matchSync(t,e,i){let r=this.matchCheckSync(t,i);r&&this.matchFinish(r,e)}walkCB(t,e,i){var r;(r=this.signal)!=null&&r.aborted&&i(),this.walkCB2(t,e,new Te(this.opts),i)}walkCB2(t,e,i,r){var a;if(w(this,hs,_r).call(this,t))return r();if((a=this.signal)!=null&&a.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2(t,e,i,r));return}i.processPatterns(t,e);let o=1,h=()=>{--o===0&&r()};for(let[l,c,f]of i.matches.entries())w(this,Xt,Ae).call(this,l)||(o++,this.match(l,c,f).then(()=>h()));for(let l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let c=l.readdirCached();l.calledReaddir()?this.walkCB3(l,c,i,h):l.readdirCB((f,d)=>this.walkCB3(l,d,i,h),!0)}h()}walkCB3(t,e,i,r){i=i.filterEntries(t,e);let o=1,h=()=>{--o===0&&r()};for(let[a,l,c]of i.matches.entries())w(this,Xt,Ae).call(this,a)||(o++,this.match(a,l,c).then(()=>h()));for(let[a,l]of i.subwalks.entries())o++,this.walkCB2(a,l,i.child(),h);h()}walkCBSync(t,e,i){var r;(r=this.signal)!=null&&r.aborted&&i(),this.walkCB2Sync(t,e,new Te(this.opts),i)}walkCB2Sync(t,e,i,r){var a;if(w(this,hs,_r).call(this,t))return r();if((a=this.signal)!=null&&a.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,i,r));return}i.processPatterns(t,e);let o=1,h=()=>{--o===0&&r()};for(let[l,c,f]of i.matches.entries())w(this,Xt,Ae).call(this,l)||this.matchSync(l,c,f);for(let l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let c=l.readdirSync();this.walkCB3Sync(l,c,i,h)}h()}walkCB3Sync(t,e,i,r){i=i.filterEntries(t,e);let o=1,h=()=>{--o===0&&r()};for(let[a,l,c]of i.matches.entries())w(this,Xt,Ae).call(this,a)||this.matchSync(a,l,c);for(let[a,l]of i.subwalks.entries())o++,this.walkCB2Sync(a,l,i.child(),h);h()}};ei=new WeakMap,ii=new WeakMap,Re=new WeakMap,Xt=new WeakSet,Ae=function(t){var e,i;return this.seen.has(t)||!!((i=(e=n(this,ii))==null?void 0:e.ignored)!=null&&i.call(e,t))},hs=new WeakSet,_r=function(t){var e,i;return!!((i=(e=n(this,ii))==null?void 0:e.childrenIgnored)!=null&&i.call(e,t))};var ns=class extends Bs{matches;constructor(t,e,i){super(t,e,i),this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){var t;if((t=this.signal)!=null&&t.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,i)=>{this.walkCB(this.path,this.patterns,()=>{var r;(r=this.signal)!=null&&r.aborted?i(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){var t;if((t=this.signal)!=null&&t.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{var e;if((e=this.signal)!=null&&e.aborted)throw this.signal.reason}),this.matches}},os=class extends Bs{results;constructor(t,e,i){super(t,e,i),this.results=new oe({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var Dh=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",At=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,Pn.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=t,this.platform=e.platform||Dh,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=e.platform==="win32"?Xe:e.platform==="darwin"?Ri:e.platform?Je:Ln;this.scurry=new l(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",r={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(l=>new lt(l,r)),[h,a]=o.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=h.map((l,c)=>new ti(l,a[c],0,this.platform))}async walk(){return[...await new ns(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new ns(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new os(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new os(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Or=(s,t={})=>{Array.isArray(s)||(s=[s]);for(let e of s)if(new lt(e,t).hasMagic())return!0;return!1};function zs(s,t={}){return new At(s,t).streamSync()}function $n(s,t={}){return new At(s,t).stream()}function as(s,t={}){return new At(s,t).walkSync()}async function Wn(s,t={}){return new At(s,t).walk()}function Us(s,t={}){return new At(s,t).iterateSync()}function Bn(s,t={}){return new At(s,t).iterate()}var kh=zs,Fh=Object.assign($n,{sync:zs}),Nh=Us,jh=Object.assign(Bn,{sync:Us}),Mh=Object.assign(as,{stream:zs,iterate:Us}),In=Object.assign(Wn,{glob:Wn,globSync:as,sync:Mh,globStream:$n,stream:Fh,globStreamSync:zs,streamSync:kh,globIterate:Bn,iterate:jh,globIterateSync:Us,iterateSync:Nh,Glob:At,hasMagic:Or,escape:ke,unescape:bt});In.glob=In;var Gs=(s="**",t=[])=>(t=[".turbo/**","node_modules/**","test/**","coverage/**","types/**","dist/**","out/**",".babelrc",".gitignore",".gitkeep","jest.config.js","package.json","package-lock.json","yarn.lock","pnpm-lock.yaml","*.md",...t],as(s,{cwd:".",ignore:t}).filter(i=>Cr.default.statSync(i).isFile())),Lh=(s="**",t=[])=>as(s,{cwd:".",ignore:t}).filter(i=>Cr.default.statSync(i).isFile()),Ph=(s=[])=>Gs("**/*.sh",s),Wh=(s=[])=>Gs("**/*.js",s),Ih=(s=[])=>Gs("**/*.py",s);var zn=s=>new RegExp(`${s}\\([^)]*\\);?(\\s*&&\\s*)?`,"g"),Un=s=>new RegExp(`(${s.join("|")})\\([^)]*\\);?`,"g"),Tr=s=>s.replace(/\/\/.*\n/g,"").replace(/\s/g,"").trim();var Fr=ni(fo()),uo=s=>s.split(/\r\n|\r|\n/).length,va=()=>(0,Fr.default)("npm ls --parseable").then(s=>uo(s)-2),Ea=()=>(0,Fr.default)("npm ls -g --parseable").then(s=>uo(s)-2),xa=/(npm|pnpm|yarn|npx)\s+(i|install|add|exec|dlx)\s+\S+/g;var _a=(s,t)=>{var r,o,h;let i=(o=((r=s.split("---"))==null?void 0:r.filter(a=>{var l;return!((l=a.split(`
`))!=null&&l.every(c=>["\r",""," "].includes(c)))}).map(a=>{var d;let l=a.split(`
`),c=l.indexOf(l.find(g=>g.includes("stringData:"))),f=l.reduce((g,y,E)=>{var m,S,b;if(E>c&&!((m=y.trim())!=null&&m.startsWith("#"))&&y.includes(":")&&((S=y.split(":"))!=null&&S[1])){let x=y.split(":").splice(1).join(":").trim();x.startsWith('"')&&x.endsWith('"')&&(x=x.substring(1,x.length-1)),g[(b=y.split(":")[0])==null?void 0:b.trim()]=x}return g},{});return{name:(d=l.find(g=>g.includes("name:")))==null?void 0:d.split(":")[1].trim(),keys:f}})).find(a=>a.name===`${t}-secret`))==null?void 0:o.keys;return(h=Object.keys(i).map(a=>`${a}=${i[a]}`))==null?void 0:h.join(`
`)};var Oa=s=>Tr(s.replace(s.includes("console.log")?zn("console.log"):Un(["print","System.out.println","Console.WriteLine"]),""));0&&(module.exports={cleanLogs,compactString,dependencyCount,generateSecrets,globalDependencyCount,jsFiles,prohibitedCommands,pyFiles,scan,scanPure,shellFiles});
